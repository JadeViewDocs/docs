# å¿«é€Ÿå¼€å§‹

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨å¿«é€Ÿäº†è§£å¦‚ä½•ä½¿ç”¨ JadeUI Python SDK åˆ›å»ºæ¡Œé¢åº”ç”¨ã€‚

## ç¯å¢ƒè¦æ±‚

- Python 3.8+
- Windows 10+ (å½“å‰ç‰ˆæœ¬)
- WebView2 Runtime

## å®‰è£…

é€šè¿‡ pip å®‰è£… JadeUI Python SDKï¼š

```bash
pip install jadeui
```

## åŸºæœ¬ä½¿ç”¨

### åˆ›å»ºç¬¬ä¸€ä¸ªåº”ç”¨

```python
from jadeui import JadeUIApp, Window

# åˆ›å»ºåº”ç”¨å®ä¾‹ (å•ä¾‹æ¨¡å¼)
app = JadeUIApp()

@app.on_ready
def on_ready():
    # åˆ›å»ºçª—å£
    window = Window(
        title="Hello JadeUI",
        width=800,
        height=600,
        url="https://example.com"
    )
    window.show()

# è¿è¡Œåº”ç”¨
app.run()
```

### ä½¿ç”¨æœ¬åœ°æœåŠ¡å™¨

é€šè¿‡ `LocalServer` æ‰˜ç®¡æœ¬åœ° Web å†…å®¹ï¼š

```python
from jadeui import JadeUIApp, Window, LocalServer

app = JadeUIApp()
server = LocalServer()

@app.on_ready
def on_ready():
    # å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨ï¼Œæ‰˜ç®¡ web ç›®å½•ï¼ˆé»˜è®¤ï¼‰
    url = server.start("myapp")
    # æˆ–æŒ‡å®šç›®å½•: server.start("myapp", "./web")
    
    window = Window(
        title="My App",
        width=1024,
        height=768,
        url=f"{url}/index.html"
    )
    window.show()

app.initialize()
app.run()
```

### ç®€åŒ– API

å¯¹äºç®€å•åº”ç”¨ï¼Œå¯ä»¥ä½¿ç”¨æ›´ç®€æ´çš„æ–¹å¼ï¼š

```python
from jadeui import Window, Theme, Backdrop

# åˆ›å»ºçª—å£
window = Window(
    title="æœ¬åœ°åº”ç”¨ç¤ºä¾‹",
    width=800,
    height=600,
    remove_titlebar=True,
    transparent=True,
    theme=Theme.SYSTEM,
)

# è®¾ç½®çª—å£å±æ€§
window.set_backdrop(Backdrop.MICA)

# è¿è¡Œ - è‡ªåŠ¨æ£€æµ‹ web ç›®å½•å¹¶å¯åŠ¨æœåŠ¡å™¨
window.run()
```

:::tip æç¤º
`window.run()` ä¼šè‡ªåŠ¨æ£€æµ‹å½“å‰ç›®å½•ä¸‹çš„ `web` ç›®å½•ï¼Œå¯åŠ¨æœ¬åœ°æœåŠ¡å™¨ï¼Œå¹¶æ³¨å†Œçª—å£æ“ä½œå¤„ç†å™¨ã€‚é€‚åˆå¿«é€Ÿå¼€å‘ç®€å•åº”ç”¨ã€‚
:::

### IPC é€šä¿¡

ä½¿ç”¨ `IPCManager` å®ç° Python åç«¯ä¸ Web å‰ç«¯çš„åŒå‘é€šä¿¡ï¼š

```python
from jadeui import JadeUIApp, Window, IPCManager

app = JadeUIApp()
ipc = IPCManager()

# æ³¨å†Œ IPC æ¶ˆæ¯å¤„ç†å™¨
@ipc.on("greet")
def handle_greet(window_id, message):
    print(f"æ”¶åˆ°æ¶ˆæ¯: {message}")
    # å‘é€å“åº”ç»™å‰ç«¯
    ipc.send(window_id, "response", f"Hello from Python! You said: {message}")
    return 1

@app.on_ready
def on_ready():
    window = Window(title="IPC Demo", url="...")
    window.show()

app.initialize()
app.run()
```

å‰ç«¯ JavaScript ä»£ç ï¼š

```javascript
// å‘é€æ¶ˆæ¯åˆ° Python
window.jade.ipcSend('greet', 'Hello from JavaScript!');

// æ¥æ”¶ Python çš„å“åº”
window.jade.ipcMain('response', function(content) {
    console.log('æ”¶åˆ°å“åº”:', content);
});
```

### ä½¿ç”¨è·¯ç”±ç³»ç»Ÿ

`Router` æä¾›åç«¯ä¸»å¯¼çš„è·¯ç”±ç³»ç»Ÿï¼Œè‡ªåŠ¨ç”Ÿæˆå¸¦ä¾§è¾¹æ çš„åº”ç”¨æ¡†æ¶ï¼š

```python
from jadeui import JadeUIApp, Router, Events
import json

app = JadeUIApp()
router = Router()

# æ³¨å†Œé¡µé¢è·¯ç”±
router.page("/", "pages/home.html", title="é¦–é¡µ", icon="ğŸ ")
router.page("/dashboard", "pages/dashboard.html", title="ä»ªè¡¨ç›˜", icon="ğŸ“Š")
router.page("/users", "pages/users.html", title="ç”¨æˆ·ç®¡ç†", icon="ğŸ‘¥")
router.page("/user/:id", "pages/user.html", title="ç”¨æˆ·è¯¦æƒ…", show_in_nav=False)
router.page("/settings", "pages/settings.html", title="è®¾ç½®", icon="âš™ï¸")
router.page("/about", "pages/about.html", title="å…³äº", icon="ğŸ˜„")

# IPC å¤„ç†å™¨ï¼ˆé€šè¿‡ router.ipc è®¿é—®ï¼‰
@router.ipc.on("get_users")
def get_users(window_id, data):
    users = [{"id": 1, "name": "å¼ ä¸‰"}, {"id": 2, "name": "æå››"}]
    router.ipc.send(window_id, "get_users:response", json.dumps(users))
    return 1

@app.on_ready
def on_ready():
    # æŒ‚è½½è·¯ç”±å™¨ï¼Œåˆ›å»ºçª—å£
    window = router.mount(
        title="My App",
        web_dir="web",
        width=1100,
        height=750,
        sidebar_width=200,
        theme="system"
    )
    
    # ç›‘å¬çª—å£äº‹ä»¶
    window.on(Events.WINDOW_RESIZED, lambda data: print(f"çª—å£å¤§å°å˜åŒ–: {data}"))

app.initialize()
app.run()
```

## çª—å£é…ç½®é€‰é¡¹

`Window` ç±»æ”¯æŒä¸°å¯Œçš„é…ç½®é€‰é¡¹ï¼š

```python
from jadeui import Window, Theme, Backdrop, RGBA

window = Window(
    title="é…ç½®ç¤ºä¾‹",
    width=1024,
    height=768,
    url="https://example.com",
    
    # çª—å£å±æ€§
    resizable=True,           # å…è®¸è°ƒæ•´å¤§å°
    remove_titlebar=False,    # ç§»é™¤åŸç”Ÿæ ‡é¢˜æ 
    transparent=False,        # å¯ç”¨é€æ˜
    always_on_top=False,      # çª—å£ç½®é¡¶
    
    # ä¸»é¢˜
    theme=Theme.SYSTEM,       # Light, Dark, System
    
    # ä½ç½®å’Œå¤§å°é™åˆ¶
    x=-1, y=-1,               # å±…ä¸­æ˜¾ç¤º (-1 è¡¨ç¤ºå±…ä¸­)
    min_width=400,
    min_height=300,
    max_width=0,              # 0 è¡¨ç¤ºæ— é™åˆ¶
    max_height=0,
    
    # åˆå§‹çŠ¶æ€
    maximized=False,
    fullscreen=False,
    focus=True,
    hide_window=False,
    
    # çª—å£æ§åˆ¶
    maximizable=True,
    minimizable=True,
    
    # èƒŒæ™¯é¢œè‰²
    background_color=RGBA(255, 255, 255, 255),
    
    # WebView è®¾ç½®
    autoplay=False,           # å…è®¸è‡ªåŠ¨æ’­æ”¾åª’ä½“
    disable_right_click=False,
    user_agent=None,          # è‡ªå®šä¹‰ User-Agent
    preload_js=None,          # é¢„åŠ è½½ JavaScript
    allow_fullscreen=True,    # å…è®¸é¡µé¢ JS è°ƒç”¨å…¨å± API (éœ€ Jadeui 0.2.1)
    
    # é«˜çº§é€‰é¡¹ (v1.1+)
    borderless=False,         # æ— è¾¹æ¡†æ¨¡å¼ (éœ€ 0.2.1+)
    content_protection=False, # å†…å®¹ä¿æŠ¤ï¼Œé˜²æ­¢æˆªå± (éœ€ 1.1+ï¼Œä¸ minimizable/maximizable å†²çª)
    
    # PostMessage é€šä¿¡ (éœ€ 1.0.2+)
    postmessage_whitelist="https://example.com,https://trusted.com",  # å…è®¸æ¥æ”¶ PostMessage çš„æº
)
```

:::warning å‚æ•°å†²çªè¯´æ˜
- `borderless=True` ä¸èƒ½ä¸ `remove_titlebar` æˆ– `transparent` åŒæ—¶ä½¿ç”¨
- `content_protection=True` ä¸èƒ½ä¸ `minimizable` æˆ– `maximizable` åŒæ—¶ä½¿ç”¨
:::

## äº‹ä»¶å¤„ç†

### åº”ç”¨äº‹ä»¶

```python
@app.on_ready
def on_ready():
    print("åº”ç”¨å·²å°±ç»ª")

@app.on_window_all_closed
def on_all_closed():
    print("æ‰€æœ‰çª—å£å·²å…³é—­")
```

### çª—å£äº‹ä»¶

æ¨èä½¿ç”¨ç±»å‹åŒ–çš„äº‹ä»¶è£…é¥°å™¨ï¼Œæä¾› IDE ç±»å‹æç¤ºï¼š

```python
from jadeui import Window

window = Window(title="Event Demo")

# ç›‘å¬çª—å£å¤§å°å˜åŒ– - å‚æ•°å·²è‡ªåŠ¨è§£æ
@window.on_resized
def on_resize(width: int, height: int):
    print(f"çª—å£å¤§å°å˜åŒ–: {width} x {height}")

# ç›‘å¬çª—å£ç§»åŠ¨
@window.on_moved
def on_move(x: int, y: int):
    print(f"çª—å£ä½ç½®: ({x}, {y})")

# ç›‘å¬ç„¦ç‚¹äº‹ä»¶
@window.on_focused
def on_focus():
    print("çª—å£è·å¾—ç„¦ç‚¹")

@window.on_blurred
def on_blur():
    print("çª—å£å¤±å»ç„¦ç‚¹")

# ç›‘å¬é¡µé¢åŠ è½½å®Œæˆ
@window.on_page_loaded
def on_page_load(url: str):
    print(f"é¡µé¢åŠ è½½å®Œæˆ: {url}")

# ç›‘å¬çª—å£å³å°†å…³é—­ - è¿”å› True å¯é˜»æ­¢å…³é—­
@window.on_closing
def on_closing():
    if has_unsaved_changes:
        return True  # é˜»æ­¢å…³é—­
    return False

# ç›‘å¬æ–‡ä»¶æ‹–æ”¾
@window.on_file_dropped
def on_file_drop(files: list, x: int, y: int):
    print(f"æ‹–æ”¾äº† {len(files)} ä¸ªæ–‡ä»¶åˆ°ä½ç½® ({x}, {y})")
    for path in files:
        print(f"  - {path}")

# ç›‘å¬æ–‡ä»¶ä¸‹è½½äº‹ä»¶ï¼ˆéœ€è¦ JadeView 0.3.1+ï¼‰
@window.on_download_started
def on_download(url: str, filename: str):
    print(f"å¼€å§‹ä¸‹è½½: {filename}")
    print(f"ä¸‹è½½åœ°å€: {url}")
    # è¿”å› True å¯é˜»æ­¢ä¸‹è½½
    if filename.endswith(".exe"):
        print("é˜»æ­¢ä¸‹è½½å¯æ‰§è¡Œæ–‡ä»¶")
        return True
    return False

# ç›‘å¬å…¨å±çŠ¶æ€å˜åŒ–ï¼ˆéœ€è¦ JadeView 1.2+ï¼‰
@window.on_fullscreen_changed
def on_fullscreen(is_fullscreen: bool):
    print(f"å…¨å±çŠ¶æ€: {is_fullscreen}")

window.show()
```

ä¹Ÿå¯ä»¥ä½¿ç”¨ `Events` å¸¸é‡ï¼š

```python
from jadeui import Window, Events

window = Window(title="Event Demo")

# å‚æ•°å·²è‡ªåŠ¨è§£æï¼Œä¸éœ€è¦ json.loads
@window.on(Events.WINDOW_RESIZED)
def on_resize(width: int, height: int):
    print(f"çª—å£å¤§å°å˜åŒ–: {width} x {height}")

@window.on(Events.WINDOW_MOVED)
def on_move(x: int, y: int):
    print(f"çª—å£ä½ç½®: ({x}, {y})")

window.show()
```

:::warning file-drop äº‹ä»¶æ³¨æ„
ä½¿ç”¨ `file-drop` äº‹ä»¶ä¼šæ¥ç®¡ WebView çš„æ‹–æ‹½äº‹ä»¶å¤„ç†ï¼Œ**å¯¼è‡´å‰ç«¯æ— æ³•æ”¶åˆ°åŸç”Ÿæ‹–æ‹½äº‹ä»¶**ã€‚å¦‚æœæ‚¨éœ€è¦åœ¨å‰ç«¯ä½¿ç”¨ JavaScript å¤„ç†æ‹–æ‹½äº‹ä»¶ï¼ˆå¦‚ `ondrop`ï¼‰ï¼Œè¯·ä¸è¦æ³¨å†Œæ­¤äº‹ä»¶ã€‚
:::

### æ–‡ä»¶ä¸‹è½½äº‹ä»¶

ä½¿ç”¨ `on_download_started` è£…é¥°å™¨ç›‘å¬ WebView ä¸­çš„æ–‡ä»¶ä¸‹è½½äº‹ä»¶ï¼ˆéœ€è¦ JadeView 0.3.1+ï¼‰ï¼š

```python
from jadeui import Window

window = Window(title="Download Demo")

@window.on_download_started
def on_download(url: str, filename: str):
    """
    ä¸‹è½½å¼€å§‹æ—¶è§¦å‘
    
    å‚æ•°:
        url: ä¸‹è½½æ–‡ä»¶çš„ URL
        filename: å»ºè®®çš„æ–‡ä»¶å
    
    è¿”å›:
        True/1: é˜»æ­¢ä¸‹è½½
        False/0/None: å…è®¸ä¸‹è½½ï¼ˆé»˜è®¤è¡Œä¸ºï¼‰
    """
    print(f"ä¸‹è½½è¯·æ±‚: {filename}")
    print(f"æ¥æº: {url}")
    
    # ç¤ºä¾‹ï¼šé˜»æ­¢å¯æ‰§è¡Œæ–‡ä»¶ä¸‹è½½
    if filename.endswith((".exe", ".msi", ".bat")):
        print("å·²é˜»æ­¢å¯æ‰§è¡Œæ–‡ä»¶ä¸‹è½½")
        return True
    
    # ç¤ºä¾‹ï¼šé˜»æ­¢æ¥è‡ªä¸ä¿¡ä»»åŸŸåçš„ä¸‹è½½
    if "untrusted-site.com" in url:
        return True
    
    return False  # å…è®¸ä¸‹è½½

window.show()
```

:::tip ç‰ˆæœ¬è¦æ±‚
`on_download_started` äº‹ä»¶éœ€è¦ JadeView DLL 0.3.1 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚è¯·ç¡®ä¿æ‚¨çš„ DLL ç‰ˆæœ¬ç¬¦åˆè¦æ±‚ã€‚
:::

## çª—å£æ“ä½œ

```python
window = Window(title="My App")
window.show()

# çª—å£çŠ¶æ€æ§åˆ¶
window.minimize()           # æœ€å°åŒ–
window.maximize()           # æœ€å¤§åŒ–/è¿˜åŸ
window.focus()              # è·å–ç„¦ç‚¹
window.hide()               # éšè—
window.close()              # å…³é—­

# å…¨å±æ§åˆ¶ (éœ€è¦ JadeView Jadeui 0.2.1)
window.set_fullscreen(True)   # è¿›å…¥å…¨å±
window.set_fullscreen(False)  # é€€å‡ºå…¨å±
window.toggle_fullscreen()    # åˆ‡æ¢å…¨å±çŠ¶æ€
print(window.is_fullscreen)   # æŸ¥è¯¢å…¨å±çŠ¶æ€
print(window.is_maximized)    # æŸ¥è¯¢æœ€å¤§åŒ–çŠ¶æ€

# å±æ€§è®¾ç½®
window.set_title("New Title")
window.set_size(1280, 720)
window.set_position(100, 100)
window.center()
window.set_always_on_top(True)
window.set_resizable(False)

# ä¸»é¢˜å’Œå¤–è§‚
window.set_theme(Theme.DARK)
window.set_backdrop(Backdrop.MICA)  # Windows 11 æ•ˆæœ

# WebView æ“ä½œ
window.load_url("https://example.com")
window.execute_js("console.log('Hello from Python!')")
```

## å®Œæ•´ç¤ºä¾‹

ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„åº”ç”¨ç¤ºä¾‹ï¼š

```python
from jadeui import JadeUIApp, Window, IPCManager, LocalServer, Theme, Backdrop
import json

app = JadeUIApp()
ipc = IPCManager()
server = LocalServer()

# IPC å¤„ç†å™¨
@ipc.on("get-data")
def handle_get_data(window_id, message):
    data = json.loads(message)
    print(f"è¯·æ±‚æ•°æ®: {data}")
    
    response = {
        "status": "success",
        "items": ["Python", "JadeUI", "WebView"]
    }
    ipc.send(window_id, "data-response", json.dumps(response))
    return 1

# çª—å£æ“ä½œå¤„ç†å™¨
@ipc.on("windowAction")
def handle_window_action(window_id, action):
    window = Window.get_window_by_id(window_id)
    if window:
        if action == "close":
            window.close()
        elif action == "minimize":
            window.minimize()
        elif action == "maximize":
            window.maximize()
    return 1

@app.on_ready
def on_ready():
    # å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨ï¼ˆé»˜è®¤æ‰˜ç®¡ web ç›®å½•ï¼‰
    url = server.start("demo")
    
    # åˆ›å»ºçª—å£
    window = Window(
        title="JadeUI Demo",
        width=1024,
        height=768,
        url=f"{url}/index.html",
        remove_titlebar=True,
        transparent=True,
        theme=Theme.SYSTEM,
    )
    
    # ä½¿ç”¨ç±»å‹åŒ–è£…é¥°å™¨ç›‘å¬äº‹ä»¶ï¼ˆå‚æ•°å·²è‡ªåŠ¨è§£æï¼‰
    @window.on_resized
    def on_resize(width: int, height: int):
        print(f"çª—å£å¤§å°å˜åŒ–: {width} x {height}")
    
    @window.on_file_dropped
    def on_file_drop(files: list, x: int, y: int):
        print(f"æ‹–æ”¾äº† {len(files)} ä¸ªæ–‡ä»¶")
        for path in files:
            print(f"  - {path}")
    
    window.show()
    window.set_backdrop(Backdrop.MICA)

if __name__ == "__main__":
    app.initialize()
    app.run()
```

## å¯¹è¯æ¡† API

ä½¿ç”¨ `Dialog` ç±»æ˜¾ç¤ºç³»ç»Ÿå¯¹è¯æ¡†ï¼ˆéœ€è¦ JadeView 1.3.0+ï¼‰ï¼š

```python
from jadeui import Dialog

# æ˜¾ç¤ºæ¶ˆæ¯æ¡†
Dialog.show_message_box(
    window_id=1,
    title="ç¡®è®¤",
    message="ç¡®å®šè¦åˆ é™¤å—ï¼Ÿ",
    type_="warning",
    buttons=["åˆ é™¤", "å–æ¶ˆ"]
)

# æ‰“å¼€æ–‡ä»¶å¯¹è¯æ¡†
Dialog.show_open_dialog(
    window_id=1,
    title="é€‰æ‹©å›¾ç‰‡",
    filters=[{"name": "å›¾ç‰‡", "extensions": ["png", "jpg", "gif"]}],
    properties=["openFile", "multiSelections"]
)

# ä¿å­˜æ–‡ä»¶å¯¹è¯æ¡†
Dialog.show_save_dialog(
    window_id=1,
    title="ä¿å­˜æ–‡æ¡£",
    default_path="document.txt",
    filters=[{"name": "æ–‡æœ¬æ–‡ä»¶", "extensions": ["txt"]}]
)

# ä¾¿æ·æ–¹æ³•
Dialog.confirm("ç¡®å®šè¦é€€å‡ºå—ï¼Ÿ")
Dialog.alert("æ“ä½œæˆåŠŸï¼")
Dialog.error("æ–‡ä»¶ä¿å­˜å¤±è´¥ï¼")
```

## ç³»ç»Ÿé€šçŸ¥

ä½¿ç”¨ `Notification` ç±»æ˜¾ç¤ºç³»ç»Ÿé€šçŸ¥ï¼ˆéœ€è¦ JadeView 1.3.0+ï¼Œä»… Windows 10+ï¼‰ï¼š

```python
from jadeui import Notification, Events

# é…ç½®åº”ç”¨ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰
Notification.config(app_name="æˆ‘çš„åº”ç”¨", icon="C:/app/icon.ico")

# ç›‘å¬æŒ‰é’®ç‚¹å‡»äº‹ä»¶
@Notification.on(Events.NOTIFICATION_ACTION)
def on_action(data):
    action_id = data.get("arguments")  # ä½ ä¼ å…¥çš„ action å‚æ•°
    button = data.get("action")        # æŒ‰é’®ç´¢å¼•
    print(f"æŒ‰é’®ç‚¹å‡»: {button}, åŠ¨ä½œ: {action_id}")

# æ˜¾ç¤ºç®€å•é€šçŸ¥
Notification.show("æç¤º", "æ“ä½œå·²å®Œæˆ")

# æ˜¾ç¤ºå¸¦æŒ‰é’®çš„é€šçŸ¥
Notification.with_buttons(
    "ä¸‹è½½å®Œæˆ",
    "video.mp4 å·²ä¸‹è½½",
    "æ‰“å¼€",
    "å¿½ç•¥",
    action="download_123"  # ç”¨äºåœ¨å›è°ƒä¸­è¯†åˆ«
)

# ä¾¿æ·æ–¹æ³•
Notification.info("æ ‡é¢˜", "å†…å®¹")
Notification.success("æ ‡é¢˜", "å†…å®¹")
Notification.warning("æ ‡é¢˜", "å†…å®¹")
Notification.error("æ ‡é¢˜", "å†…å®¹")
```

## ä¸‹ä¸€æ­¥

- æŸ¥çœ‹ [API å‚è€ƒ](./reference/methods.mdx) äº†è§£è¯¦ç»†çš„ API æ–‡æ¡£
- å­¦ä¹  [åº”ç”¨æ‰“åŒ…](./packaging.mdx) å°†åº”ç”¨æ‰“åŒ…æˆç‹¬ç«‹çš„ .exe æ–‡ä»¶
- æ¢ç´¢ `Router` ç±»æ„å»ºå¤æ‚çš„å¤šé¡µé¢åº”ç”¨
- å­¦ä¹ ä½¿ç”¨ Windows 11 çš„ Mica/Acrylic æ•ˆæœ
