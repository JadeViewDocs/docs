# API å‚è€ƒ

JadeUI Python SDK æä¾›äº†ä¸€å¥—å®Œæ•´çš„ API ç”¨äºåˆ›å»ºæ¡Œé¢åº”ç”¨ã€‚æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»å„ä¸ªç±»å’Œæ–¹æ³•ã€‚

## JadeUIApp

ä¸»åº”ç”¨ç±»ï¼Œç®¡ç†åº”ç”¨ç”Ÿå‘½å‘¨æœŸã€‚é‡‡ç”¨å•ä¾‹æ¨¡å¼ã€‚

### æ„é€ å‡½æ•°

```python
app = JadeUIApp()
```

### æ–¹æ³•

#### initialize()

åˆå§‹åŒ–åº”ç”¨ã€‚

```python
app.initialize(
    enable_dev_tools=False,  # æ˜¯å¦å¯ç”¨å¼€å‘è€…å·¥å…· (F12)
    log_file=None,           # æ—¥å¿—æ–‡ä»¶è·¯å¾„
    data_directory=None,     # WebView æ•°æ®ç›®å½•
)
```

| å‚æ•° | ç±»å‹ | æè¿° |
|------|------|------|
| enable_dev_tools | bool | å¯ç”¨å¼€å‘è€…å·¥å…· |
| log_file | str \| None | æ—¥å¿—æ–‡ä»¶è·¯å¾„ |
| data_directory | str \| None | WebView æ•°æ®å­˜å‚¨ç›®å½• |

**è¿”å›å€¼**: `JadeUIApp` (æ”¯æŒé“¾å¼è°ƒç”¨)

#### run()

å¯åŠ¨åº”ç”¨æ¶ˆæ¯å¾ªç¯ã€‚æ­¤æ–¹æ³•ä¼šé˜»å¡ç›´åˆ°æ‰€æœ‰çª—å£å…³é—­ã€‚

```python
app.run()
```

#### quit()

é€€å‡ºåº”ç”¨ã€‚

```python
app.quit()
```

#### is_ready()

æ£€æŸ¥åº”ç”¨æ˜¯å¦å·²åˆå§‹åŒ–ã€‚

```python
if app.is_ready():
    print("åº”ç”¨å·²å°±ç»ª")
```

**è¿”å›å€¼**: `bool`

#### get_webview_version()

è·å– WebView å¼•æ“ç‰ˆæœ¬ã€‚

```python
version = app.get_webview_version()
print(f"WebView ç‰ˆæœ¬: {version}")  # ä¾‹å¦‚: "120.0.2210.144"
```

**è¿”å›å€¼**: `str | None` - WebView ç‰ˆæœ¬å­—ç¬¦ä¸²ï¼Œå¦‚æœä¸å¯ç”¨åˆ™è¿”å› `None`

### è£…é¥°å™¨

#### @on_ready

æ³¨å†Œåº”ç”¨å°±ç»ªäº‹ä»¶å¤„ç†å™¨ã€‚

```python
@app.on_ready
def setup():
    window = Window("My App")
    window.show()
```

#### @on_window_all_closed

æ³¨å†Œæ‰€æœ‰çª—å£å…³é—­äº‹ä»¶å¤„ç†å™¨ã€‚

```python
@app.on_window_all_closed
def cleanup():
    print("æ‰€æœ‰çª—å£å·²å…³é—­")
```

### äº‹ä»¶

| äº‹ä»¶å | æè¿° |
|--------|------|
| ready | åº”ç”¨åˆå§‹åŒ–å®Œæˆ |
| error | å‘ç”Ÿé”™è¯¯ |
| window-all-closed | æ‰€æœ‰çª—å£å…³é—­ |
| before-quit | åº”ç”¨å³å°†é€€å‡º |

---

## Window

WebView çª—å£ç±»ï¼Œç”¨äºåˆ›å»ºå’Œç®¡ç†çª—å£ã€‚

### æ„é€ å‡½æ•°

```python
window = Window(
    title="Window",          # çª—å£æ ‡é¢˜
    width=800,               # å®½åº¦
    height=600,              # é«˜åº¦
    url=None,                # åˆå§‹ URL
    **options                # å…¶ä»–é€‰é¡¹
)
```

### çª—å£é€‰é¡¹

| é€‰é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|------|------|--------|------|
| resizable | bool | True | å…è®¸è°ƒæ•´å¤§å° |
| remove_titlebar | bool | False | ç§»é™¤åŸç”Ÿæ ‡é¢˜æ  |
| transparent | bool | False | å¯ç”¨çª—å£é€æ˜ |
| background_color | RGBA | (255,255,255,255) | èƒŒæ™¯é¢œè‰² |
| always_on_top | bool | False | çª—å£ç½®é¡¶ |
| theme | str | "System" | ä¸»é¢˜ (Light/Dark/System) |
| maximized | bool | False | åˆå§‹æœ€å¤§åŒ– |
| maximizable | bool | True | å…è®¸æœ€å¤§åŒ– |
| minimizable | bool | True | å…è®¸æœ€å°åŒ– |
| x | int | -1 | X åæ ‡ (-1 å±…ä¸­) |
| y | int | -1 | Y åæ ‡ (-1 å±…ä¸­) |
| min_width | int | 0 | æœ€å°å®½åº¦ |
| min_height | int | 0 | æœ€å°é«˜åº¦ |
| max_width | int | 0 | æœ€å¤§å®½åº¦ (0 æ— é™åˆ¶) |
| max_height | int | 0 | æœ€å¤§é«˜åº¦ (0 æ— é™åˆ¶) |
| fullscreen | bool | False | å…¨å±æ¨¡å¼ |
| focus | bool | True | åˆ›å»ºæ—¶è·å–ç„¦ç‚¹ |
| hide_window | bool | False | åˆ›å»ºæ—¶éšè— |
| use_page_icon | bool | True | ä½¿ç”¨é¡µé¢å›¾æ ‡ |
| autoplay | bool | False | å…è®¸åª’ä½“è‡ªåŠ¨æ’­æ”¾ |
| disable_right_click | bool | False | ç¦ç”¨å³é”®èœå• |
| user_agent | str \| None | None | è‡ªå®šä¹‰ User-Agent |
| preload_js | str \| None | None | é¢„åŠ è½½ JavaScript |
| allow_fullscreen | bool | True | å…è®¸é¡µé¢ JS è°ƒç”¨å…¨å± API (éœ€ Jadeui 0.2.1) |
| borderless | bool | False | æ— è¾¹æ¡†æ¨¡å¼ï¼Œç§»é™¤è¾¹æ¡†å’Œç³»ç»Ÿé˜´å½± (éœ€ 0.2.1+) |
| content_protection | bool | False | å†…å®¹ä¿æŠ¤ï¼Œé˜²æ­¢æˆªå±/å½•å± (éœ€ 1.1+) |
| postmessage_whitelist | str \| None | None | PostMessage ç™½åå•ï¼Œé€—å·åˆ†éš”çš„æºåœ°å€ (éœ€ 1.0.2+) |

:::warning å‚æ•°å†²çªè¯´æ˜
- **borderless**: `borderless=True` ä¸èƒ½ä¸ `remove_titlebar` æˆ– `transparent` åŒæ—¶ä½¿ç”¨ï¼Œå¦åˆ™ä¼šæŠ›å‡º `ValueError`ã€‚è¿™æ˜¯å› ä¸º `borderless` ä¼šç§»é™¤è¾¹æ¡†å’Œç³»ç»Ÿé˜´å½±ï¼Œä¸åä¸¤è€…åŠŸèƒ½å†²çªã€‚
- **content_protection**: `content_protection=True` ä¸èƒ½ä¸ `minimizable` æˆ– `maximizable` åŒæ—¶ä½¿ç”¨ã€‚å¯ç”¨å†…å®¹ä¿æŠ¤æ—¶ï¼Œçª—å£å°†æ— æ³•æœ€å°åŒ–å’Œæœ€å¤§åŒ–ã€‚
:::

### ç”Ÿå‘½å‘¨æœŸæ–¹æ³•

#### show()

æ˜¾ç¤ºçª—å£ã€‚

```python
window.show(url=None)  # å¯é€‰ä¼ å…¥ URL
```

**è¿”å›å€¼**: `Window` (é“¾å¼è°ƒç”¨)

#### hide()

éšè—çª—å£ã€‚

```python
window.hide()
```

**è¿”å›å€¼**: `Window`

#### close()

å…³é—­çª—å£ã€‚

```python
window.close()
```

#### focus()

ä½¿çª—å£è·å–ç„¦ç‚¹ã€‚

```python
window.focus()
```

**è¿”å›å€¼**: `Window`

### çŠ¶æ€æ§åˆ¶æ–¹æ³•

#### minimize()

æœ€å°åŒ–çª—å£ã€‚

```python
window.minimize()
```

**è¿”å›å€¼**: `Window`

#### maximize()

åˆ‡æ¢æœ€å¤§åŒ–/è¿˜åŸçŠ¶æ€ã€‚

```python
window.maximize()
```

**è¿”å›å€¼**: `Window`

#### restore()

ä»æœ€å°åŒ–/æœ€å¤§åŒ–çŠ¶æ€è¿˜åŸã€‚

```python
window.restore()
```

**è¿”å›å€¼**: `Window`

#### set_fullscreen()

è®¾ç½®å…¨å±æ¨¡å¼ã€‚

:::note ç‰ˆæœ¬è¦æ±‚
æ­¤åŠŸèƒ½éœ€è¦ Jadeui 0.2.1 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚
:::

```python
window.set_fullscreen(True)   # è¿›å…¥å…¨å±
window.set_fullscreen(False)  # é€€å‡ºå…¨å±
```

| å‚æ•° | ç±»å‹ | æè¿° |
|------|------|------|
| fullscreen | bool | æ˜¯å¦å…¨å± |

**è¿”å›å€¼**: `Window`

#### toggle_fullscreen()

åˆ‡æ¢å…¨å±æ¨¡å¼ã€‚å¦‚æœå½“å‰æ˜¯å…¨å±åˆ™é€€å‡ºï¼Œå¦åˆ™è¿›å…¥å…¨å±ã€‚

:::note ç‰ˆæœ¬è¦æ±‚
æ­¤åŠŸèƒ½éœ€è¦ Jadeui 0.2.1 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚
:::

```python
window.toggle_fullscreen()
```

**è¿”å›å€¼**: `Window`

### å±æ€§æ–¹æ³•

#### set_title()

è®¾ç½®çª—å£æ ‡é¢˜ã€‚

```python
window.set_title("New Title")
# æˆ–ä½¿ç”¨å±æ€§
window.title = "New Title"
```

**è¿”å›å€¼**: `Window`

#### set_size()

è®¾ç½®çª—å£å¤§å°ã€‚

```python
window.set_size(1280, 720)
```

| å‚æ•° | ç±»å‹ | æè¿° |
|------|------|------|
| width | int | å®½åº¦ (åƒç´ ) |
| height | int | é«˜åº¦ (åƒç´ ) |

**è¿”å›å€¼**: `Window`

#### set_min_size()

è®¾ç½®æœ€å°çª—å£å¤§å°ã€‚

```python
window.set_min_size(400, 300)
```

**è¿”å›å€¼**: `Window`

#### set_max_size()

è®¾ç½®æœ€å¤§çª—å£å¤§å°ã€‚

```python
window.set_max_size(1920, 1080)  # 0 è¡¨ç¤ºæ— é™åˆ¶
```

**è¿”å›å€¼**: `Window`

#### set_position()

è®¾ç½®çª—å£ä½ç½®ã€‚

```python
window.set_position(100, 100)
```

| å‚æ•° | ç±»å‹ | æè¿° |
|------|------|------|
| x | int | X åæ ‡ |
| y | int | Y åæ ‡ |

**è¿”å›å€¼**: `Window`

#### center()

å°†çª—å£å±…ä¸­æ˜¾ç¤ºã€‚

```python
window.center()
```

**è¿”å›å€¼**: `Window`

#### set_visible()

è®¾ç½®çª—å£å¯è§æ€§ã€‚

```python
window.set_visible(True)
window.set_visible(False)
```

**è¿”å›å€¼**: `Window`

#### set_always_on_top()

è®¾ç½®çª—å£ç½®é¡¶ã€‚

```python
window.set_always_on_top(True)
```

**è¿”å›å€¼**: `Window`

#### set_resizable()

è®¾ç½®æ˜¯å¦å¯è°ƒæ•´å¤§å°ã€‚

```python
window.set_resizable(False)
```

**è¿”å›å€¼**: `Window`

### ä¸»é¢˜æ–¹æ³•

#### set_theme()

è®¾ç½®çª—å£ä¸»é¢˜ã€‚

```python
from jadeui import Theme

window.set_theme(Theme.LIGHT)  # æµ…è‰²
window.set_theme(Theme.DARK)   # æ·±è‰²
window.set_theme(Theme.SYSTEM) # è·Ÿéšç³»ç»Ÿ
```

**è¿”å›å€¼**: `Window`

#### get_theme()

è·å–å½“å‰ä¸»é¢˜ã€‚

```python
theme = window.get_theme()
```

**è¿”å›å€¼**: `str`

#### set_backdrop()

è®¾ç½®çª—å£èƒŒæ™¯ææ–™ (Windows 11)ã€‚

```python
from jadeui import Backdrop

window.set_backdrop(Backdrop.MICA)     # Mica æ•ˆæœ
window.set_backdrop(Backdrop.MICA_ALT) # Mica Alt æ•ˆæœ
window.set_backdrop(Backdrop.ACRYLIC)  # Acrylic æ•ˆæœ
```

:::note
çª—å£å¿…é¡»è®¾ç½® `transparent=True` æ‰èƒ½ä½¿ç”¨ backdrop æ•ˆæœã€‚
:::

**è¿”å›å€¼**: `Window`

### WebView æ–¹æ³•

#### load_url() / navigate()

å¯¼èˆªåˆ° URLã€‚

```python
window.load_url("https://example.com")
# æˆ–
window.navigate("https://example.com")
```

**è¿”å›å€¼**: `Window`

#### execute_js() / eval()

æ‰§è¡Œ JavaScript ä»£ç ã€‚

```python
window.execute_js("console.log('Hello!')")
# æˆ–
window.eval("document.title = 'New Title'")
```

**è¿”å›å€¼**: `Window`

#### reload()

é‡æ–°åŠ è½½å½“å‰é¡µé¢ã€‚

```python
window.reload()
```

**è¿”å›å€¼**: `Window`

### çŠ¶æ€å±æ€§

| å±æ€§ | ç±»å‹ | æè¿° |
|------|------|------|
| id | int \| None | çª—å£ ID |
| title | str | çª—å£æ ‡é¢˜ |
| size | tuple[int, int] | çª—å£å¤§å° (width, height) |
| position | tuple[int, int] | çª—å£ä½ç½® (x, y) |
| is_visible | bool | æ˜¯å¦å¯è§ |
| is_maximized | bool | æ˜¯å¦æœ€å¤§åŒ– (éœ€ Jadeui 0.2.1) |
| is_minimized | bool | æ˜¯å¦æœ€å°åŒ– |
| is_focused | bool | æ˜¯å¦è·å¾—ç„¦ç‚¹ |
| is_fullscreen | bool | æ˜¯å¦å…¨å± (éœ€ Jadeui 0.2.1) |

### é™æ€æ–¹æ³•

#### get_window_count()

è·å–æ´»åŠ¨çª—å£æ•°é‡ã€‚

```python
count = Window.get_window_count()
```

#### get_window_by_id()

é€šè¿‡ ID è·å–çª—å£ã€‚

```python
window = Window.get_window_by_id(1)
```

#### get_all_windows()

è·å–æ‰€æœ‰æ´»åŠ¨çª—å£ã€‚

```python
windows = Window.get_all_windows()
```

### äº‹ä»¶

Window ç±»æä¾›ä¸¤ç§äº‹ä»¶ç›‘å¬æ–¹å¼ï¼š**ç±»å‹åŒ–è£…é¥°å™¨**ï¼ˆæ¨èï¼‰å’Œ **Events å¸¸é‡**ã€‚

äº‹ä»¶å‚æ•°å·²è‡ªåŠ¨è§£æï¼Œä¸éœ€è¦æ‰‹åŠ¨ `json.loads`ã€‚

#### ç±»å‹åŒ–äº‹ä»¶è£…é¥°å™¨ï¼ˆæ¨èï¼‰

æä¾› IDE ç±»å‹æç¤ºï¼Œå‚æ•°å·²è‡ªåŠ¨è§£æï¼š

| è£…é¥°å™¨ | å›è°ƒç­¾å | æè¿° |
|--------|----------|------|
| `@window.on_resized` | `(width: int, height: int)` | çª—å£å¤§å°æ”¹å˜ |
| `@window.on_moved` | `(x: int, y: int)` | çª—å£ä½ç½®æ”¹å˜ |
| `@window.on_focused` | `()` | çª—å£è·å¾—ç„¦ç‚¹ |
| `@window.on_blurred` | `()` | çª—å£å¤±å»ç„¦ç‚¹ |
| `@window.on_closing` | `() -> bool` | çª—å£å³å°†å…³é—­ï¼Œè¿”å› True é˜»æ­¢ |
| `@window.on_state_changed` | `(is_maximized: bool)` | çª—å£çŠ¶æ€æ”¹å˜ |
| `@window.on_fullscreen_changed` | `(is_fullscreen: bool)` | å…¨å±çŠ¶æ€æ”¹å˜ (éœ€ 1.2+) |
| `@window.on_file_dropped` | `(files: List[str], x: int, y: int)` | æ–‡ä»¶æ‹–æ”¾ |
| `@window.on_navigate` | `(url: str) -> bool` | å³å°†å¯¼èˆªï¼Œè¿”å› True é˜»æ­¢ |
| `@window.on_page_loaded` | `(url: str)` | é¡µé¢åŠ è½½å®Œæˆ |
| `@window.on_title_updated` | `(title: str)` | é¡µé¢æ ‡é¢˜æ›´æ–° |
| `@window.on_new_window` | `(url: str, frame_name: str) -> bool` | æ–°çª—å£è¯·æ±‚ï¼Œè¿”å› True é˜»æ­¢ |
| `@window.on_download_started` | `(url: str, filename: str) -> bool` | ä¸‹è½½å¼€å§‹ï¼Œè¿”å› True é˜»æ­¢ (éœ€ 0.3.1+) |

**ç¤ºä¾‹**ï¼š

```python
from jadeui import Window

window = Window(title="äº‹ä»¶ç¤ºä¾‹")

@window.on_resized
def handle_resize(width: int, height: int):
    print(f"çª—å£å¤§å°: {width} x {height}")

@window.on_moved
def handle_move(x: int, y: int):
    print(f"çª—å£ä½ç½®: ({x}, {y})")

@window.on_focused
def handle_focus():
    print("çª—å£è·å¾—ç„¦ç‚¹")

@window.on_closing
def handle_closing():
    if has_unsaved_changes:
        return True  # é˜»æ­¢å…³é—­
    return False

@window.on_page_loaded
def handle_loaded(url: str):
    print(f"é¡µé¢åŠ è½½å®Œæˆ: {url}")

window.show()
```

#### Events å¸¸é‡æ–¹å¼

ä¹Ÿå¯ä»¥ä½¿ç”¨ `Events` å¸¸é‡ï¼Œå‚æ•°åŒæ ·å·²è‡ªåŠ¨è§£æï¼š

| äº‹ä»¶å¸¸é‡ | äº‹ä»¶å | å›è°ƒå‚æ•° | æè¿° |
|----------|--------|----------|------|
| `Events.WINDOW_RESIZED` | window-resized | `(width, height)` | å¤§å°æ”¹å˜ |
| `Events.WINDOW_MOVED` | window-moved | `(x, y)` | ä½ç½®æ”¹å˜ |
| `Events.WINDOW_FOCUSED` | window-focused | `()` | è·å¾—ç„¦ç‚¹ |
| `Events.WINDOW_BLURRED` | window-blurred | `()` | å¤±å»ç„¦ç‚¹ |
| `Events.WINDOW_CLOSING` | window-closing | `()` | å³å°†å…³é—­ï¼ˆè¿”å› 1 å¯é˜»æ­¢ï¼‰ |
| `Events.WINDOW_STATE_CHANGED` | window-state-changed | `(is_maximized,)` | çŠ¶æ€æ”¹å˜ |
| `Events.WINDOW_FULLSCREEN` | window-fullscreen | `(is_fullscreen,)` | å…¨å±çŠ¶æ€æ”¹å˜ (éœ€ 1.2+) |
| `Events.FILE_DROP` | file-drop | `(files, x, y)` | æ–‡ä»¶æ‹–æ”¾ |
| `Events.WEBVIEW_WILL_NAVIGATE` | webview-will-navigate | `(url,)` | å³å°†å¯¼èˆª |
| `Events.WEBVIEW_DID_FINISH_LOAD` | webview-did-finish-load | `(url,)` | åŠ è½½å®Œæˆ |
| `Events.WEBVIEW_NEW_WINDOW` | webview-new-window | `(url, frame_name)` | æ–°çª—å£è¯·æ±‚ |
| `Events.WEBVIEW_PAGE_TITLE_UPDATED` | webview-page-title-updated | `(title,)` | æ ‡é¢˜æ›´æ–° |
| `Events.FAVICON_UPDATED` | favicon-updated | `(favicon,)` | å›¾æ ‡æ›´æ–° |
| `Events.WEBVIEW_DOWNLOAD_STARTED` | webview-download-started | `(url, filename)` | ä¸‹è½½å¼€å§‹ (éœ€ 0.3.1+) |

**ç¤ºä¾‹**ï¼š

```python
from jadeui import Window, Events

window = Window(title="äº‹ä»¶ç¤ºä¾‹")

# å‚æ•°å·²è‡ªåŠ¨è§£æï¼Œä¸éœ€è¦ json.loads
@window.on(Events.WINDOW_RESIZED)
def on_resize(width: int, height: int):
    print(f"çª—å£å¤§å°: {width} x {height}")

@window.on(Events.WEBVIEW_DID_FINISH_LOAD)
def on_page_load(url: str):
    print(f"é¡µé¢åŠ è½½å®Œæˆ: {url}")

window.show()
```

#### å†…éƒ¨äº‹ä»¶

| äº‹ä»¶å | å›è°ƒå‚æ•° | æè¿° |
|--------|----------|------|
| created | Window | çª—å£åˆ›å»ºå®Œæˆ |
| closed | - | çª—å£å·²å…³é—­ |
| page-loaded | url, status | é¡µé¢åŠ è½½å®Œæˆ |

#### file-drop äº‹ä»¶è¯¦è§£

`file-drop` äº‹ä»¶åœ¨ç”¨æˆ·å°†æ–‡ä»¶æ‹–æ”¾åˆ°çª—å£æ—¶è§¦å‘ã€‚

**å›è°ƒå‚æ•°**ï¼š

| å‚æ•° | ç±»å‹ | æè¿° |
|------|------|------|
| files | List[str] | æ‹–æ”¾çš„æ–‡ä»¶è·¯å¾„åˆ—è¡¨ |
| x | int | æ‹–æ”¾ä½ç½®çš„ X åæ ‡ |
| y | int | æ‹–æ”¾ä½ç½®çš„ Y åæ ‡ |

**ç¤ºä¾‹**ï¼š

```python
from jadeui import Window

window = Window(title="æ–‡ä»¶æ‹–æ”¾ç¤ºä¾‹")

@window.on_file_dropped
def on_file_drop(files: list, x: int, y: int):
    print(f"æ‹–æ”¾äº† {len(files)} ä¸ªæ–‡ä»¶åˆ°ä½ç½® ({x}, {y})")
    for file_path in files:
        print(f"  - {file_path}")

window.show()
```

:::warning æ³¨æ„
ä½¿ç”¨ `file-drop` äº‹ä»¶ä¼šæ¥ç®¡ WebView çš„æ‹–æ‹½äº‹ä»¶å¤„ç†ï¼Œ**å¯¼è‡´å‰ç«¯æ— æ³•æ”¶åˆ°åŸç”Ÿæ‹–æ‹½äº‹ä»¶**ã€‚å¦‚æœæ‚¨éœ€è¦åœ¨å‰ç«¯å¤„ç†æ‹–æ‹½äº‹ä»¶ï¼Œè¯·ä¸è¦æ³¨å†Œæ­¤äº‹ä»¶ã€‚
:::

#### download-started äº‹ä»¶è¯¦è§£

`webview-download-started` äº‹ä»¶åœ¨ WebView ä¸­å¼€å§‹ä¸‹è½½æ–‡ä»¶æ—¶è§¦å‘ã€‚

:::note ç‰ˆæœ¬è¦æ±‚
æ­¤äº‹ä»¶éœ€è¦ JadeView DLL 0.3.1 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚
:::

**å›è°ƒå‚æ•°**ï¼š

| å‚æ•° | ç±»å‹ | æè¿° |
|------|------|------|
| url | str | ä¸‹è½½æ–‡ä»¶çš„ URL |
| filename | str | å»ºè®®çš„æ–‡ä»¶å |

**è¿”å›å€¼**ï¼š
- è¿”å› `True` æˆ– `1`ï¼šé˜»æ­¢ä¸‹è½½
- è¿”å› `False`ã€`0` æˆ– `None`ï¼šå…è®¸ä¸‹è½½ï¼ˆé»˜è®¤è¡Œä¸ºï¼‰

**ç¤ºä¾‹**ï¼š

```python
from jadeui import Window

window = Window(title="ä¸‹è½½äº‹ä»¶ç¤ºä¾‹")

@window.on_download_started
def on_download(url: str, filename: str):
    print(f"ä¸‹è½½è¯·æ±‚: {filename}")
    print(f"æ¥æº: {url}")
    
    # é˜»æ­¢å¯æ‰§è¡Œæ–‡ä»¶ä¸‹è½½
    if filename.endswith((".exe", ".msi", ".bat")):
        print("å·²é˜»æ­¢å¯æ‰§è¡Œæ–‡ä»¶ä¸‹è½½")
        return True
    
    # é˜»æ­¢æ¥è‡ªä¸ä¿¡ä»»åŸŸåçš„ä¸‹è½½
    if "untrusted-site.com" in url:
        return True
    
    return False  # å…è®¸ä¸‹è½½

window.show()
```

---

## IPCManager

IPC é€šä¿¡ç®¡ç†å™¨ï¼Œå¤„ç† Python åç«¯ä¸ Web å‰ç«¯çš„é€šä¿¡ã€‚

### æ„é€ å‡½æ•°

```python
ipc = IPCManager()
```

### æ–¹æ³•

#### register_handler()

æ³¨å†Œæ¶ˆæ¯å¤„ç†å™¨ã€‚

```python
def handler(window_id: int, message: str) -> int:
    print(f"æ”¶åˆ°: {message}")
    return 1

ipc.register_handler("channel-name", handler)
```

| å‚æ•° | ç±»å‹ | æè¿° |
|------|------|------|
| channel | str | é€šé“åç§° |
| handler | Callable | å¤„ç†å‡½æ•° |

#### send()

å‘é€æ¶ˆæ¯åˆ°çª—å£ã€‚

```python
ipc.send(window_id, "channel-name", "message content")
```

| å‚æ•° | ç±»å‹ | æè¿° |
|------|------|------|
| window_id | int | ç›®æ ‡çª—å£ ID |
| channel | str | é€šé“åç§° |
| message | str | æ¶ˆæ¯å†…å®¹ |

#### remove_handler()

ç§»é™¤æ¶ˆæ¯å¤„ç†å™¨ã€‚

```python
ipc.remove_handler("channel-name")
```

#### list_handlers()

åˆ—å‡ºæ‰€æœ‰æ³¨å†Œçš„é€šé“ã€‚

```python
channels = ipc.list_handlers()
```

**è¿”å›å€¼**: `list[str]`

### è£…é¥°å™¨

#### @on()

è£…é¥°å™¨æ–¹å¼æ³¨å†Œå¤„ç†å™¨ã€‚

```python
@ipc.on("greet")
def handle_greet(window_id, message):
    print(f"æ”¶åˆ°: {message}")
    ipc.send(window_id, "response", "Hello!")
    return 1
```

---

## LocalServer

æœ¬åœ° HTTP æœåŠ¡å™¨ï¼Œç”¨äºæ‰˜ç®¡ Web å†…å®¹ã€‚

### æ„é€ å‡½æ•°

```python
server = LocalServer()
```

### æ–¹æ³•

#### start()

å¯åŠ¨æœåŠ¡å™¨ã€‚

```python
url = server.start(
    root_path="./web",   # æ ¹ç›®å½•
    app_name="myapp"     # åº”ç”¨åç§°
)
print(f"æœåŠ¡å™¨è¿è¡Œåœ¨: {url}")
```

| å‚æ•° | ç±»å‹ | æè¿° |
|------|------|------|
| root_path | str | é™æ€æ–‡ä»¶æ ¹ç›®å½• |
| app_name | str | åº”ç”¨æ ‡è¯†ç¬¦ |

**è¿”å›å€¼**: `str` - æœåŠ¡å™¨ URL

#### stop()

åœæ­¢æœåŠ¡å™¨ã€‚

```python
server.stop()
```

#### get_url()

è·å–æ–‡ä»¶çš„å®Œæ•´ URLã€‚

```python
url = server.get_url("index.html")
```

**è¿”å›å€¼**: `str`

### å±æ€§

| å±æ€§ | ç±»å‹ | æè¿° |
|------|------|------|
| is_running | bool | æœåŠ¡å™¨æ˜¯å¦è¿è¡Œä¸­ |
| url | str \| None | æœåŠ¡å™¨ URL |

---

## Router

åç«¯ä¸»å¯¼çš„è·¯ç”±ç³»ç»Ÿï¼Œæ”¯æŒå†…ç½®æ¨¡æ¿å’Œè‡ªå®šä¹‰æ¨¡æ¿ã€‚

### æ„é€ å‡½æ•°

```python
router = Router(ipc=None)  # å¯ä¼ å…¥ IPCManager å®ä¾‹
```

### æ–¹æ³•

#### page()

æ³¨å†Œé¡µé¢è·¯ç”±ã€‚

```python
router.page(
    path="/",                    # è·¯ç”±è·¯å¾„
    template="pages/home.html",  # æ¨¡æ¿æ–‡ä»¶
    title="é¦–é¡µ",                # é¡µé¢æ ‡é¢˜
    icon="ğŸ ",                   # å›¾æ ‡ (ä¾§è¾¹æ æ˜¾ç¤º)
    show_in_nav=True,            # æ˜¯å¦æ˜¾ç¤ºåœ¨å¯¼èˆªæ 
)
```

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|------|------|--------|------|
| path | str | - | è·¯ç”±è·¯å¾„ï¼Œæ”¯æŒå‚æ•° (å¦‚ `/user/:id`) |
| template | str | - | æ¨¡æ¿æ–‡ä»¶è·¯å¾„ |
| title | str | "Page" | é¡µé¢æ ‡é¢˜ |
| icon | str | "" | é¡µé¢å›¾æ ‡ |
| show_in_nav | bool | True | æ˜¯å¦åœ¨å¯¼èˆªä¸­æ˜¾ç¤º |

**è¿”å›å€¼**: `Router` (é“¾å¼è°ƒç”¨)

#### mount()

æŒ‚è½½è·¯ç”±å™¨å¹¶åˆ›å»ºçª—å£ã€‚

```python
window = router.mount(
    title="My App",          # çª—å£æ ‡é¢˜
    web_dir="web",           # Web æ–‡ä»¶ç›®å½•
    width=1024,              # çª—å£å®½åº¦
    height=768,              # çª—å£é«˜åº¦
    sidebar_width=220,       # ä¾§è¾¹æ å®½åº¦
    theme="system",          # ä¸»é¢˜
    initial_path="/",        # åˆå§‹è·¯ç”±
    template=None,           # è‡ªå®šä¹‰æ¨¡æ¿ (None ä½¿ç”¨å†…ç½®)
    head_links=[],           # é¢å¤– CSS é“¾æ¥
    scripts=[],              # é¢å¤– JS è„šæœ¬
    **window_options         # å…¶ä»–çª—å£é€‰é¡¹
)
```

**è¿”å›å€¼**: `Window`

#### go()

å¯¼èˆªåˆ°æŒ‡å®šè·¯ç”±ã€‚

```python
router.go("/settings")
router.go("/user/123")  # å¸¦å‚æ•°
```

**è¿”å›å€¼**: `bool` - æ˜¯å¦æˆåŠŸ

#### set_theme()

è®¾ç½®åº”ç”¨ä¸»é¢˜ã€‚

```python
router.set_theme("light")  # light, dark, system
```

#### set_backdrop()

è®¾ç½®çª—å£èƒŒæ™¯ææ–™ã€‚

```python
router.set_backdrop("mica")  # mica, micaAlt, acrylic
```

### å±æ€§

| å±æ€§ | ç±»å‹ | æè¿° |
|------|------|------|
| current_route | str | å½“å‰è·¯ç”±è·¯å¾„ |
| window | Window \| None | å…³è”çš„çª—å£å®ä¾‹ |

---

## Dialog

å¯¹è¯æ¡† APIï¼Œæä¾›æ–‡ä»¶é€‰æ‹©ã€ä¿å­˜å’Œæ¶ˆæ¯æ¡†åŠŸèƒ½ã€‚

:::note ç‰ˆæœ¬è¦æ±‚
Dialog API éœ€è¦ JadeView DLL 1.3.0 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚
:::

### æ–¹æ³•

#### show_open_dialog()

æ˜¾ç¤ºæ‰“å¼€æ–‡ä»¶å¯¹è¯æ¡†ã€‚

```python
from jadeui import Dialog

# é˜»å¡æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰
Dialog.show_open_dialog(
    window_id=1,
    title="é€‰æ‹©å›¾ç‰‡",
    default_path="C:/",
    filters=[
        {"name": "å›¾ç‰‡", "extensions": ["png", "jpg", "gif"]},
        {"name": "æ‰€æœ‰æ–‡ä»¶", "extensions": ["*"]}
    ],
    properties=["openFile", "multiSelections"]
)

# éé˜»å¡æ¨¡å¼ + å›è°ƒ
def on_result(result):
    print(f"é€‰ä¸­: {result}")

Dialog.show_open_dialog(
    window_id=1,
    title="é€‰æ‹©æ–‡ä»¶",
    properties=["openFile"],
    blocking=False,
    callback=on_result
)
```

| å‚æ•° | ç±»å‹ | æè¿° |
|------|------|------|
| window_id | int | çˆ¶çª—å£ ID |
| title | str \| None | å¯¹è¯æ¡†æ ‡é¢˜ |
| default_path | str \| None | é»˜è®¤æ‰“å¼€è·¯å¾„ |
| button_label | str \| None | ç¡®è®¤æŒ‰é’®çš„è‡ªå®šä¹‰æ ‡ç­¾ |
| filters | list \| None | æ–‡ä»¶è¿‡æ»¤å™¨ï¼Œå¦‚ `[{"name": "å›¾ç‰‡", "extensions": ["png", "jpg"]}]` |
| properties | list \| None | å¯¹è¯æ¡†å±æ€§ï¼š`openFile`, `openDirectory`, `multiSelections`, `showHiddenFiles` |
| blocking | bool | æ˜¯å¦é˜»å¡ï¼ˆé»˜è®¤ Trueï¼‰ |
| callback | Callable | å›è°ƒå‡½æ•°ï¼ˆéé˜»å¡æ¨¡å¼ä½¿ç”¨ï¼‰ |

**è¿”å›å€¼**: `int` - 1 æˆåŠŸï¼Œ0 å¤±è´¥

#### show_save_dialog()

æ˜¾ç¤ºä¿å­˜æ–‡ä»¶å¯¹è¯æ¡†ã€‚

```python
Dialog.show_save_dialog(
    window_id=1,
    title="ä¿å­˜æ–‡æ¡£",
    default_path="document.txt",
    filters=[{"name": "æ–‡æœ¬æ–‡ä»¶", "extensions": ["txt"]}]
)
```

| å‚æ•° | ç±»å‹ | æè¿° |
|------|------|------|
| window_id | int | çˆ¶çª—å£ ID |
| title | str \| None | å¯¹è¯æ¡†æ ‡é¢˜ |
| default_path | str \| None | é»˜è®¤ä¿å­˜è·¯å¾„/æ–‡ä»¶å |
| button_label | str \| None | ç¡®è®¤æŒ‰é’®çš„è‡ªå®šä¹‰æ ‡ç­¾ |
| filters | list \| None | æ–‡ä»¶è¿‡æ»¤å™¨ |
| blocking | bool | æ˜¯å¦é˜»å¡ï¼ˆé»˜è®¤ Trueï¼‰ |
| callback | Callable | å›è°ƒå‡½æ•°ï¼ˆéé˜»å¡æ¨¡å¼ä½¿ç”¨ï¼‰ |

**è¿”å›å€¼**: `int` - 1 æˆåŠŸï¼Œ0 å¤±è´¥

#### show_message_box()

æ˜¾ç¤ºæ¶ˆæ¯æ¡†ã€‚

```python
Dialog.show_message_box(
    window_id=1,
    title="ç¡®è®¤åˆ é™¤",
    message="ç¡®å®šè¦åˆ é™¤è¿™ä¸ªæ–‡ä»¶å—ï¼Ÿ",
    detail="æ­¤æ“ä½œä¸å¯æ’¤é”€",
    type_="warning",
    buttons=["åˆ é™¤", "å–æ¶ˆ"],
    default_id=1,
    cancel_id=1
)
```

| å‚æ•° | ç±»å‹ | æè¿° |
|------|------|------|
| window_id | int | çˆ¶çª—å£ ID |
| title | str \| None | æ¶ˆæ¯æ¡†æ ‡é¢˜ |
| message | str \| None | æ¶ˆæ¯å†…å®¹ |
| detail | str \| None | è¯¦ç»†ä¿¡æ¯ |
| buttons | list \| None | æŒ‰é’®æ–‡æœ¬åˆ—è¡¨ï¼Œå¦‚ `["ç¡®å®š", "å–æ¶ˆ"]` |
| default_id | int | é»˜è®¤é€‰ä¸­çš„æŒ‰é’®ç´¢å¼• |
| cancel_id | int | å–æ¶ˆæŒ‰é’®çš„ç´¢å¼•ï¼ˆæŒ‰ ESC æ—¶è§¦å‘ï¼‰ |
| type_ | str | æ¶ˆæ¯ç±»å‹ï¼š`none`, `info`, `error`, `warning`, `question` |
| blocking | bool | æ˜¯å¦é˜»å¡ï¼ˆé»˜è®¤ Trueï¼‰ |
| callback | Callable | å›è°ƒå‡½æ•°ï¼ˆéé˜»å¡æ¨¡å¼ä½¿ç”¨ï¼‰ |

**è¿”å›å€¼**: `int` - 1 æˆåŠŸï¼Œ0 å¤±è´¥

#### show_error_box()

æ˜¾ç¤ºé”™è¯¯æ¡†ï¼ˆç®€åŒ–ç‰ˆï¼‰ã€‚

```python
Dialog.show_error_box(1, "é”™è¯¯", "æ–‡ä»¶è¯»å–å¤±è´¥ï¼")
```

### ä¾¿æ·æ–¹æ³•

#### confirm()

æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†ã€‚

```python
Dialog.confirm("ç¡®å®šè¦é€€å‡ºå—ï¼Ÿ")
Dialog.confirm("åˆ é™¤æ–‡ä»¶ï¼Ÿ", title="ç¡®è®¤", ok_label="åˆ é™¤", cancel_label="å–æ¶ˆ")
```

#### alert()

æ˜¾ç¤ºæç¤ºå¯¹è¯æ¡†ã€‚

```python
Dialog.alert("æ“ä½œæˆåŠŸï¼")
Dialog.alert("è¯·æ³¨æ„ï¼", type_="warning")
```

#### error()

æ˜¾ç¤ºé”™è¯¯å¯¹è¯æ¡†ã€‚

```python
Dialog.error("æ–‡ä»¶ä¿å­˜å¤±è´¥ï¼")
```

### å¸¸é‡

#### MessageBoxType

æ¶ˆæ¯æ¡†ç±»å‹å¸¸é‡ã€‚

```python
from jadeui import MessageBoxType

MessageBoxType.NONE      # "none"
MessageBoxType.INFO      # "info"
MessageBoxType.WARNING   # "warning"
MessageBoxType.ERROR     # "error"
MessageBoxType.QUESTION  # "question"
```

#### OpenDialogProperties

æ‰“å¼€å¯¹è¯æ¡†å±æ€§å¸¸é‡ã€‚

```python
from jadeui import OpenDialogProperties

OpenDialogProperties.OPEN_FILE         # "openFile"
OpenDialogProperties.OPEN_DIRECTORY    # "openDirectory"
OpenDialogProperties.MULTI_SELECTIONS  # "multiSelections"
OpenDialogProperties.SHOW_HIDDEN_FILES # "showHiddenFiles"
```

---

## Notification

æ¡Œé¢é€šçŸ¥ APIï¼Œæ”¯æŒ Windows ç³»ç»Ÿé€šçŸ¥ã€‚

:::note ç‰ˆæœ¬è¦æ±‚
Notification API éœ€è¦ JadeView DLL 1.3.0 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚ä»…æ”¯æŒ Windows 10+ã€‚
:::

### æ–¹æ³•

#### config()

é…ç½®é€šçŸ¥åº”ç”¨ä¿¡æ¯ï¼ˆå¯é€‰ï¼Œæœ‰é»˜è®¤å€¼ï¼‰ã€‚

```python
from jadeui import Notification

Notification.config(
    app_name="æˆ‘çš„åº”ç”¨",
    icon="C:/path/to/icon.ico"  # ç»å¯¹è·¯å¾„
)
```

| å‚æ•° | ç±»å‹ | æè¿° |
|------|------|------|
| app_name | str \| None | åº”ç”¨æ˜¾ç¤ºåç§°ï¼ˆé»˜è®¤ "JadeUI App"ï¼‰ |
| icon | str \| None | åº”ç”¨å›¾æ ‡è·¯å¾„ï¼ˆç»å¯¹è·¯å¾„ï¼‰ |

#### show()

æ˜¾ç¤ºç®€å•é€šçŸ¥ï¼ˆæ— æŒ‰é’®ï¼‰ã€‚

```python
Notification.show("æç¤º", "æ“ä½œå·²å®Œæˆ")
Notification.show("ä¸‹è½½ä¸­", "æ­£åœ¨ä¸‹è½½æ–‡ä»¶...", timeout=5000)
```

| å‚æ•° | ç±»å‹ | æè¿° |
|------|------|------|
| title | str | é€šçŸ¥æ ‡é¢˜ï¼ˆå¿…å¡«ï¼‰ |
| body | str \| None | é€šçŸ¥å†…å®¹ |
| icon | str \| None | å›¾æ ‡è·¯å¾„ï¼ˆè¦†ç›– config è®¾ç½®ï¼‰ |
| timeout | int | è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼Œ<= 0 ä½¿ç”¨é»˜è®¤ï¼‰ |

**è¿”å›å€¼**: `bool` - æ˜¾ç¤ºæˆåŠŸè¿”å› True

#### with_buttons()

æ˜¾ç¤ºå¸¦æŒ‰é’®çš„é€šçŸ¥ï¼ˆæœ€å¤šä¸¤ä¸ªæŒ‰é’®ï¼‰ã€‚

```python
Notification.with_buttons(
    "ä¸‹è½½å®Œæˆ",
    "video.mp4 å·²ä¸‹è½½",
    "æ‰“å¼€",       # ç¬¬ä¸€ä¸ªæŒ‰é’®
    "å¿½ç•¥",       # ç¬¬äºŒä¸ªæŒ‰é’®ï¼ˆå¯é€‰ï¼‰
    action="download_123"  # åŠ¨ä½œæ ‡è¯†ç¬¦
)
```

| å‚æ•° | ç±»å‹ | æè¿° |
|------|------|------|
| title | str | é€šçŸ¥æ ‡é¢˜ |
| body | str | é€šçŸ¥å†…å®¹ |
| button1 | str | ç¬¬ä¸€ä¸ªæŒ‰é’®æ–‡æœ¬ |
| button2 | str \| None | ç¬¬äºŒä¸ªæŒ‰é’®æ–‡æœ¬ï¼ˆå¯é€‰ï¼‰ |
| icon | str \| None | å›¾æ ‡è·¯å¾„ |
| timeout | int | è¶…æ—¶æ—¶é—´ |
| action | str \| None | åŠ¨ä½œæ ‡è¯†ç¬¦ï¼Œç”¨äºåœ¨å›è°ƒä¸­è¯†åˆ«é€šçŸ¥ |

**è¿”å›å€¼**: `bool` - æ˜¾ç¤ºæˆåŠŸè¿”å› True

#### on()

æ³¨å†Œé€šçŸ¥äº‹ä»¶ç›‘å¬å™¨ã€‚

```python
from jadeui import Notification, Events

@Notification.on(Events.NOTIFICATION_ACTION)
def on_action(data):
    # data = {
    #     "action": "action_0",      # æŒ‰é’®ç´¢å¼•
    #     "title": "æ‰“å¼€",           # æŒ‰é’®æ–‡æœ¬
    #     "arguments": "download_123" # ä½ ä¼ å…¥çš„ action å‚æ•°
    # }
    print(f"æŒ‰é’®ç‚¹å‡»: {data}")

@Notification.on(Events.NOTIFICATION_DISMISSED)
def on_dismissed(data):
    print("é€šçŸ¥è¢«å…³é—­")
```

æ”¯æŒçš„äº‹ä»¶ï¼š

| äº‹ä»¶ | æè¿° |
|------|------|
| `Events.NOTIFICATION_ACTION` | ç”¨æˆ·ç‚¹å‡»é€šçŸ¥æŒ‰é’® |
| `Events.NOTIFICATION_SHOWN` | é€šçŸ¥æˆåŠŸæ˜¾ç¤º |
| `Events.NOTIFICATION_DISMISSED` | é€šçŸ¥è¢«å…³é—­ |
| `Events.NOTIFICATION_FAILED` | é€šçŸ¥æ˜¾ç¤ºå¤±è´¥ |

### ä¾¿æ·æ–¹æ³•

```python
Notification.info("æ ‡é¢˜", "å†…å®¹")
Notification.success("æ ‡é¢˜", "å†…å®¹")
Notification.warning("æ ‡é¢˜", "å†…å®¹")
Notification.error("æ ‡é¢˜", "å†…å®¹")
```

### å®Œæ•´ç¤ºä¾‹

```python
from jadeui import Notification, Events

# 1. é…ç½®åº”ç”¨ä¿¡æ¯
Notification.config(app_name="æˆ‘çš„åº”ç”¨", icon="C:/app/icon.ico")

# 2. ç›‘å¬æŒ‰é’®ç‚¹å‡»äº‹ä»¶
@Notification.on(Events.NOTIFICATION_ACTION)
def on_action(data):
    action_id = data.get("arguments")  # è·å– action å‚æ•°
    button = data.get("action")        # æŒ‰é’®ç´¢å¼•

    if action_id == "download_123":
        if button == "action_0":
            print("ç”¨æˆ·ç‚¹å‡»äº†ã€Œæ‰“å¼€ã€")
        elif button == "action_1":
            print("ç”¨æˆ·ç‚¹å‡»äº†ã€Œå¿½ç•¥ã€")

# 3. å‘é€é€šçŸ¥
Notification.with_buttons(
    "ä¸‹è½½å®Œæˆ",
    "video.mp4 å·²ä¸‹è½½",
    "æ‰“å¼€",
    "å¿½ç•¥",
    action="download_123"
)
```

---

## EventEmitter

äº‹ä»¶å‘å°„å™¨åŸºç±»ï¼Œæä¾›äº‹ä»¶è®¢é˜…å’Œå‘å¸ƒåŠŸèƒ½ã€‚

### æ–¹æ³•

#### on()

æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨ã€‚

```python
# æ–¹æ³•å½¢å¼
emitter.on("event", callback)

# è£…é¥°å™¨å½¢å¼
@emitter.on("event")
def callback(data):
    pass
```

#### off()

ç§»é™¤äº‹ä»¶ç›‘å¬å™¨ã€‚

```python
emitter.off("event", callback)  # ç§»é™¤ç‰¹å®šç›‘å¬å™¨
emitter.off("event")            # ç§»é™¤è¯¥äº‹ä»¶æ‰€æœ‰ç›‘å¬å™¨
```

#### emit()

è§¦å‘äº‹ä»¶ã€‚

```python
emitter.emit("event", arg1, arg2, key=value)
```

**è¿”å›å€¼**: `bool` - æ˜¯å¦æœ‰ç›‘å¬å™¨è¢«è°ƒç”¨

#### once()

æ³¨å†Œä¸€æ¬¡æ€§ç›‘å¬å™¨ã€‚

```python
@emitter.once("event")
def callback():
    pass  # åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡
```

#### remove_all_listeners()

ç§»é™¤æ‰€æœ‰ç›‘å¬å™¨ã€‚

```python
emitter.remove_all_listeners("event")  # ç‰¹å®šäº‹ä»¶
emitter.remove_all_listeners()         # æ‰€æœ‰äº‹ä»¶
```

#### listener_count()

è·å–ç›‘å¬å™¨æ•°é‡ã€‚

```python
count = emitter.listener_count("event")
```

#### event_names()

è·å–æ‰€æœ‰æœ‰ç›‘å¬å™¨çš„äº‹ä»¶åã€‚

```python
names = emitter.event_names()
```

---

## å¸¸é‡

### Theme

çª—å£ä¸»é¢˜å¸¸é‡ã€‚

```python
from jadeui import Theme

Theme.LIGHT   # "Light"
Theme.DARK    # "Dark"
Theme.SYSTEM  # "System"
```

### Backdrop

Windows 11 èƒŒæ™¯ææ–™å¸¸é‡ã€‚

```python
from jadeui import Backdrop

Backdrop.MICA      # "mica"
Backdrop.MICA_ALT  # "micaAlt"
Backdrop.ACRYLIC   # "acrylic"
```

### Events

æ ‡å‡†äº‹ä»¶åç§°å¸¸é‡ã€‚æ¨èä½¿ç”¨è¿™äº›å¸¸é‡è€Œä¸æ˜¯æ‰‹å†™å­—ç¬¦ä¸²ï¼Œæ›´åŠ ç±»å‹å®‰å…¨ã€‚

```python
from jadeui import Events

# åº”ç”¨ç”Ÿå‘½å‘¨æœŸäº‹ä»¶
Events.APP_READY          # "app-ready"
Events.WINDOW_ALL_CLOSED  # "window-all-closed"
Events.BEFORE_QUIT        # "before-quit"

# çª—å£äº‹ä»¶
Events.WINDOW_CREATED         # "window-created"
Events.APP_WINDOW_CREATED     # "app-window-created"
Events.WINDOW_CLOSED          # "window-closed"
Events.WINDOW_CLOSING         # "window-closing"
Events.WINDOW_RESIZED         # "window-resized"
Events.WINDOW_STATE_CHANGED   # "window-state-changed"
Events.WINDOW_FULLSCREEN      # "window-fullscreen" (éœ€ 1.2+)
Events.WINDOW_MOVED           # "window-moved"
Events.WINDOW_FOCUSED         # "window-focused"
Events.WINDOW_BLURRED         # "window-blurred"
Events.WINDOW_DESTROYED       # "window-destroyed"
Events.RESIZED                # "resized" (æ—§å…¼å®¹æ ¼å¼)

# WebView äº‹ä»¶
Events.WEBVIEW_WILL_NAVIGATE      # "webview-will-navigate"
Events.WEBVIEW_DID_START_LOADING  # "webview-did-start-loading"
Events.WEBVIEW_DID_FINISH_LOAD    # "webview-did-finish-load"
Events.WEBVIEW_NEW_WINDOW         # "webview-new-window"
Events.WEBVIEW_PAGE_TITLE_UPDATED # "webview-page-title-updated"
Events.WEBVIEW_PAGE_ICON_UPDATED  # "webview-page-icon-updated"
Events.FAVICON_UPDATED            # "favicon-updated"
Events.JAVASCRIPT_RESULT          # "javascript-result"
Events.WEBVIEW_DOWNLOAD_STARTED   # "webview-download-started" (éœ€ 0.3.1+)
Events.POSTMESSAGE_RECEIVED       # "postmessage-received" (éœ€ 1.0.2+)

# æ–‡ä»¶äº‹ä»¶
Events.FILE_DROP          # "file-drop"

# ä¸»é¢˜äº‹ä»¶
Events.THEME_CHANGED      # "theme-changed"

# é€šçŸ¥äº‹ä»¶ (éœ€ 1.3.0+)
Events.NOTIFICATION_ACTION    # "notification-action" (ç”¨æˆ·ç‚¹å‡»æŒ‰é’®)
Events.NOTIFICATION_SHOWN     # "notification-shown" (é€šçŸ¥æˆåŠŸæ˜¾ç¤º)
Events.NOTIFICATION_DISMISSED # "notification-dismissed" (é€šçŸ¥è¢«å…³é—­)
Events.NOTIFICATION_FAILED    # "notification-failed" (é€šçŸ¥æ˜¾ç¤ºå¤±è´¥)

# å…¶ä»–äº‹ä»¶
Events.UPDATE_WINDOW_ICON # "update-window-icon"
Events.IPC_MESSAGE        # "ipc-message"
```

#### ä½¿ç”¨ç±»å‹åŒ–è£…é¥°å™¨ç›‘å¬äº‹ä»¶

```python
from jadeui import Window

window = Window(title="äº‹ä»¶ç¤ºä¾‹")

# å‚æ•°å·²è‡ªåŠ¨è§£æï¼Œæä¾› IDE ç±»å‹æç¤º
@window.on_resized
def on_resize(width: int, height: int):
    print(f"çª—å£å¤§å°æ”¹å˜: {width} x {height}")

@window.on_moved
def on_move(x: int, y: int):
    print(f"çª—å£ä½ç½®: ({x}, {y})")

@window.on_focused
def on_focus():
    print("çª—å£è·å¾—ç„¦ç‚¹")

@window.on_blurred
def on_blur():
    print("çª—å£å¤±å»ç„¦ç‚¹")

@window.on_page_loaded
def on_page_load(url: str):
    print(f"é¡µé¢åŠ è½½å®Œæˆ: {url}")

# é˜»æ­¢çª—å£å…³é—­
@window.on_closing
def on_closing():
    return True  # è¿”å› True é˜»æ­¢å…³é—­

# æ‹¦æˆªæ–°çª—å£è¯·æ±‚
@window.on_new_window
def on_new_window(url: str, frame_name: str):
    print(f"æ‹¦æˆªæ–°çª—å£: {url}")
    window.navigate(url)  # åœ¨å½“å‰çª—å£æ‰“å¼€
    return True  # é˜»æ­¢æ‰“å¼€æ–°çª—å£

# ç›‘å¬æ–‡ä»¶ä¸‹è½½äº‹ä»¶ (éœ€ 0.3.1+)
@window.on_download_started
def on_download(url: str, filename: str):
    print(f"ä¸‹è½½è¯·æ±‚: {filename} from {url}")
    if filename.endswith(".exe"):
        return True  # é˜»æ­¢ exe æ–‡ä»¶ä¸‹è½½
    return False

# ç›‘å¬å…¨å±çŠ¶æ€æ”¹å˜ (éœ€ 1.2+)
@window.on_fullscreen_changed
def on_fullscreen(is_fullscreen: bool):
    print(f"å…¨å±çŠ¶æ€: {is_fullscreen}")

window.show()
```

---

## ç±»å‹å®šä¹‰

### RGBA

é¢œè‰²ç»“æ„ä½“ã€‚

```python
from jadeui import RGBA

color = RGBA(r=255, g=128, b=64, a=255)
```

### WebViewWindowOptions

çª—å£é…ç½®é€‰é¡¹ç»“æ„ä½“ã€‚

### WebViewSettings

WebView è¡Œä¸ºè®¾ç½®ç»“æ„ä½“ã€‚

---

## å¼‚å¸¸

### JadeUIError

æ‰€æœ‰ JadeUI å¼‚å¸¸çš„åŸºç±»ã€‚

### DLLLoadError

DLL åŠ è½½å¤±è´¥ã€‚

### WindowCreationError

çª—å£åˆ›å»ºå¤±è´¥ã€‚

### IPCError

IPC é€šä¿¡é”™è¯¯ã€‚

### ServerError

æœ¬åœ°æœåŠ¡å™¨é”™è¯¯ã€‚

### InitializationError

SDK åˆå§‹åŒ–é”™è¯¯ã€‚

```python
from jadeui import JadeUIError, WindowCreationError

try:
    window = Window(title="Test")
    window.show()
except WindowCreationError as e:
    print(f"çª—å£åˆ›å»ºå¤±è´¥: {e}")
except JadeUIError as e:
    print(f"JadeUI é”™è¯¯: {e}")
```

---

## å·¥å…·å‡½æ•°

### create_app()

å¿«æ·åˆ›å»ºåº”ç”¨å®ä¾‹ã€‚

```python
from jadeui import create_app, Window

app = create_app(
    enable_dev_tools=True,
    log_file="app.log"
)

@app.on_ready
def setup():
    Window(title="My App").show()

app.run()
```

### utils.get_resource_path()

è·å–èµ„æºæ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼Œå…¼å®¹æ‰“åŒ…ç¯å¢ƒã€‚

```python
from jadeui import utils

path = utils.get_resource_path("assets/icon.png")
```

### utils.show_error()

æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ã€‚

```python
from jadeui import utils

utils.show_error("é”™è¯¯", "å‘ç”Ÿäº†ä¸€ä¸ªé”™è¯¯")
```

### utils.ensure_directory()

ç¡®ä¿ç›®å½•å­˜åœ¨ã€‚

```python
from jadeui import utils

utils.ensure_directory("./data/cache")
```

---

## DLL ä¸‹è½½å·¥å…·

### download_dll()

ä¸‹è½½ JadeView DLLã€‚

```python
from jadeui import download_dll

download_dll(force=False)  # force=True å¼ºåˆ¶é‡æ–°ä¸‹è½½
```

### ensure_dll()

ç¡®ä¿ DLL å­˜åœ¨ï¼Œä¸å­˜åœ¨åˆ™ä¸‹è½½ã€‚

```python
from jadeui import ensure_dll

ensure_dll()
```

### find_dll()

æŸ¥æ‰¾ DLL æ–‡ä»¶è·¯å¾„ã€‚

```python
from jadeui import find_dll

path = find_dll()
```

### get_architecture()

è·å–å½“å‰ç³»ç»Ÿæ¶æ„ã€‚

```python
from jadeui import get_architecture

arch = get_architecture()  # "x64" æˆ– "x86"
```

