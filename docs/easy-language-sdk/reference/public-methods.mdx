# 单独公开方法

除了 JadeView 类方法外，易语言 SDK 还提供了一些单独的公开方法，这些方法可以直接调用，无需通过 JadeView 类实例。

## JadeView消息循环

**函数签名**：`JadeView消息循环 > 无返回值`

**参数**：无

**返回值**：无

**描述**：执行并保持主进程生命周期，必须在初始化后调用，用于处理窗口事件和IPC消息。

**示例代码**：

```e
.局部变量 开启DevTools, 逻辑型

' 根据是否为调试版决定是否开启开发者工具
开启DevTools ＝ 是否为调试版()

' 整个初始化都是异步的
JadeView.初始化(开启DevTools, GBK文本到UTF8文本(取运行目录()) ＋ "\log.txt", 取运行目录())

' 订阅IPC消息
订阅IPC消息()

' 在异步中，千万不要等待返回后执行任何创建窗口操作
JadeView消息循环()

返回 (0)  ' 可以根据您的需要返回任意数值
```

**说明**：消息循环是 JadeView 的核心函数，它会阻塞当前线程并持续处理窗口事件和IPC消息。所有窗口创建和事件处理都需要在消息循环运行期间进行。消息循环应该在初始化完成后立即调用，而不是在创建窗口后。

**注意事项**：
1. 初始化过程是异步的，不要在初始化后立即执行创建窗口等操作
2. 开发者工具可以根据环境动态开启，方便调试
3. 消息循环会阻塞当前线程，因此应该是程序的最后一个调用

## JadeView创建本地服务

**函数签名**：`JadeView创建本地服务 > 文本型`

**参数**：
| 参数名 | 类型 | 可空 | 描述 |
|-------|------|------|------|
| 路径 | 文本型 | 否 | 本地服务的根目录路径 |
| 自定义域名 | 文本型 | 是 | 自定义域名，默认使用localhost |

**返回值**：文本型，成功返回服务器URL，失败返回空字符串

**描述**：创建一个本地HTTP服务器，用于提供本地文件服务。

**示例代码**：

```e
.局部变量 服务器URL, 文本型
服务器URL ＝ JadeView创建本地服务("D:\web\myapp", "localhost")
.如果真 (服务器URL ≠ "")
    调试输出 ("本地服务器创建成功：" ＋ 服务器URL)
    ' 使用返回的URL创建窗口
    JadeView.创建窗口(服务器URL, 0, , )
.否则
    调试输出 ("服务器创建失败")
.如果真结束
```

## GBK文本到UTF8文本

**函数签名**：`GBK文本到UTF8文本 > 文本型`

**参数**：
| 参数名 | 类型 | 可空 | 描述 |
|-------|------|------|------|
| GBK文本 | 文本型 | 否 | 要转换的GBK编码文本 |

**返回值**：文本型，转换后的UTF-8编码文本

**描述**：将GBK编码的文本转换为UTF-8编码的文本，用于与JavaScript交互时的编码转换。

**示例代码**：

```e
.局部变量 GBK文本, 文本型
.局部变量 UTF8文本, 文本型
GBK文本 ＝ "测试文本"
UTF8文本 ＝ GBK文本到UTF8文本(GBK文本)
调试输出 ("转换后：" ＋ UTF8文本)
```

## UTF8文本到GBK文本

**函数签名**：`UTF8文本到GBK文本 > 文本型`

**参数**：
| 参数名 | 类型 | 可空 | 描述 |
|-------|------|------|------|
| UTF8文本 | 文本型 | 否 | 要转换的UTF-8编码文本 |

**返回值**：文本型，转换后的GBK编码文本

**描述**：将UTF-8编码的文本转换为GBK编码的文本，用于处理从JavaScript接收的文本数据。

**示例代码**：

```e
.局部变量 UTF8文本, 文本型
.局部变量 GBK文本, 文本型
UTF8文本 ＝ "测试文本"
GBK文本 ＝ UTF8文本到GBK文本(UTF8文本)
调试输出 ("转换后：" ＋ GBK文本)
```