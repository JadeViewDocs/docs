# JadeView 类方法

JadeView 类是易语言 SDK 中的核心类，提供了一系列用于管理 WebView 窗口和与 WebView 交互的方法。以下是所有公开的方法：

## 初始化

**函数签名**：`初始化 > 逻辑型`

**参数**：
| 参数名 | 类型 | 可空 | 描述 |
|-------|------|------|------|
| DevTools | 逻辑型 | 是 | 是否开启开发者工具 |
| 日志路径 | 文本型 | 是 | 开启 JadeView 日志打印的路径 |
| 数据目录 | 文本型 | 是 | 数据存储目录 |

**返回值**：逻辑型，初始化是否成功

**描述**：初始化 JadeView 运行时环境，必须在使用其他方法之前调用。

**示例代码**：

```e
.局部变量 初始化成功, 逻辑型
初始化成功 ＝ JadeView.初始化(假, "", "")
.如果真 (初始化成功 ＝ 假)
    调试输出 ("JadeView 初始化失败！")
    返回 ()
.如果真结束
```

## 创建窗口

**函数签名**：`创建窗口 > 整数型`

**参数**：
| 参数名 | 类型 | 可空 | 描述 |
|-------|------|------|------|
| url | 文本型 | 否 | 窗口要加载的 URL |
| 父窗口id | 整数型 | 是 | 父窗口的句柄 |
| 窗口设置 | JadeView窗口设置 | 是 | 窗口配置选项 |
| 视窗设置 | JadeView视窗设置 | 是 | 浏览器视窗的配置选项 |

**返回值**：整数型，成功返回窗口ID，失败返回0

**描述**：创建一个新的 WebView 窗口。

**示例代码**：

```e
.局部变量 窗口设置, JadeView窗口设置
.局部变量 视窗设置, JadeView视窗设置
.局部变量 窗口ID, 整数型

窗口设置.标题 ＝ "JadeView 示例应用"
窗口设置.宽度 ＝ 900
窗口设置.高度 ＝ 600
窗口设置.窗口主题 ＝ #主题_自动

窗口ID ＝ JadeView.创建窗口("https://www.example.com"0, 窗口设置, 视窗设置)
.如果真 (窗口ID ＞ 0)
    调试输出 ("WebView 窗口创建成功，窗口ID：" ＋ 到文本 (窗口ID))
.如果真结束
```

## 设置窗口标题

**函数签名**：`设置窗口标题 > 逻辑型`

**参数**：
| 参数名 | 类型 | 可空 | 描述 |
|-------|------|------|------|
| WinId | 整数型 | 否 | 窗口ID |
| 窗口标题 | 文本型 | 是 | 窗口标题，留空则跟随页面标题 |

**返回值**：逻辑型，设置是否成功

**描述**：设置指定窗口的标题。

**示例代码**：

```e
JadeView.设置窗口标题(窗口ID, "新的窗口标题")
```

## ipc_订阅

**函数签名**：`ipc_订阅 > 无返回值`

**参数**：
| 参数名 | 类型 | 可空 | 描述 |
|-------|------|------|------|
| 通道 | 文本型 | 否 | 消息通道名称 |
| 回调函数 | 子程序指针 | 否 | 消息回调函数 |

**返回值**：无

**描述**：订阅由前端发来的消息。

**示例代码**：

```e
JadeView.ipc_订阅("message_channel", &消息回调函数)
```

## 注册程序事件

**函数签名**：`注册程序事件 > 整数型`

**参数**：
| 参数名 | 类型 | 可空 | 描述 |
|-------|------|------|------|
| 事件名称 | 文本型 | 否 | 事件名称 |
| 回调函数 | 子程序指针 | 否 | 事件回调函数 |

**返回值**：整数型，事件ID，用于注销事件

**描述**：注册程序事件的回调函数。

**示例代码**：

```e
.局部变量 事件ID, 整数型
事件ID ＝ JadeView.注册程序事件("window_close", &窗口关闭回调)
```

## 注销程序事件

**函数签名**：`注销程序事件 > 逻辑型`

**参数**：
| 参数名 | 类型 | 可空 | 描述 |
|-------|------|------|------|
| 事件名称 | 文本型 | 否 | 事件名称 |
| 事件ID | 整数型 | 否 | 要注销的事件ID |

**返回值**：逻辑型，注销是否成功

**描述**：注销之前注册的程序事件。

**示例代码**：

```e
JadeView.注销程序事件("window_close", 事件ID)
```

## ipc_广播

**函数签名**：`ipc_广播 > 逻辑型`

**参数**：
| 参数名 | 类型 | 可空 | 描述 |
|-------|------|------|------|
| 窗口ID | 整数型 | 否 | 窗口ID |
| 通道 | 文本型 | 否 | 消息通道名称 |
| 消息内容 | 文本型 | 否 | 消息内容 |

**返回值**：逻辑型，广播是否成功

**描述**：向前端广播消息。

**示例代码**：

```e
JadeView.ipc_广播(窗口ID, "message_channel", "Hello from Easy Language!")
```

## 设置窗口主题

**函数签名**：`设置窗口主题 > 逻辑型`

**参数**：
| 参数名 | 类型 | 可空 | 描述 |
|-------|------|------|------|
| 窗口ID | 整数型 | 否 | 窗口ID |
| 主题 | 文本型 | 否 | 主题名称，使用 #主题_ 常量 |

**返回值**：逻辑型，设置是否成功

**描述**：设置指定窗口的主题。

**示例代码**：

```e
JadeView.设置窗口主题(窗口ID, #主题_暗色)
```

## 重绘窗口

**函数签名**：`重绘窗口 > 逻辑型`

**参数**：
| 参数名 | 类型 | 可空 | 描述 |
|-------|------|------|------|
| 窗口id | 整数型 | 否 | 窗口ID |

**返回值**：逻辑型，重绘是否成功

**描述**：请求重绘指定窗口。

**示例代码**：

```e
JadeView.重绘窗口(窗口ID)
```

## 获取窗口主题

**函数签名**：`获取窗口主题 > 逻辑型`

**参数**：
| 参数名 | 类型 | 可空 | 描述 |
|-------|------|------|------|
| 窗口id | 整数型 | 否 | 窗口ID |

**返回值**：逻辑型，真=暗黑主题，假=亮色主题

**描述**：获取指定窗口的当前主题。

**示例代码**：

```e
.局部变量 是暗黑主题, 逻辑型
是暗黑主题 ＝ JadeView.获取窗口主题(窗口ID)
```

## 设置背景材料

**函数签名**：`设置背景材料 > 逻辑型`

**参数**：
| 参数名 | 类型 | 可空 | 描述 |
|-------|------|------|------|
| 窗口id | 整数型 | 否 | 窗口ID |
| 背景材料 | 文本型 | 否 | 背景材料类型：mica, micaAlt, acrylic |

**返回值**：逻辑型，设置是否成功

**描述**：设置窗口的背景材料，设置前必须清除窗口背景。

**示例代码**：

```e
JadeView.设置背景材料(窗口ID, "mica")
```

## 禁用窗口

**函数签名**：`禁用窗口 > 逻辑型`

**参数**：
| 参数名 | 类型 | 可空 | 描述 |
|-------|------|------|------|
| 窗口id | 整数型 | 否 | 窗口ID |
| 禁用 | 逻辑型 | 是 | 是否禁用窗口 |

**返回值**：逻辑型，操作是否成功

**描述**：启用或禁用指定窗口。

**示例代码**：

```e
JadeView.禁用窗口(窗口ID, 真) ' 禁用窗口
JadeView.禁用窗口(窗口ID, 假) ' 启用窗口
```

## 创建RGBA颜色

**函数签名**：`创建RGBA颜色 > JadeRgb结构`

**参数**：
| 参数名 | 类型 | 可空 | 描述 |
|-------|------|------|------|
| R | 整数型 | 否 | 红色分量，0-255 |
| G | 整数型 | 否 | 绿色分量，0-255 |
| B | 整数型 | 否 | 蓝色分量，0-255 |
| A | 双精度小数型 | 是 | 透明度分量，0-255，默认255 |

**返回值**：JadeRgb结构，创建的颜色对象

**描述**：创建一个RGBA颜色对象。

**示例代码**：

```e
.局部变量 背景颜色, JadeRgb结构
背景颜色 ＝ JadeView.创建RGBA颜色(255, 0, 0, 128) ' 半透明红色
```

## 设置最大化状态

**函数签名**：`设置最大化状态 > 逻辑型`

**参数**：
| 参数名 | 类型 | 可空 | 描述 |
|-------|------|------|------|
| 窗口ID | 整数型 | 否 | 窗口ID |

**返回值**：逻辑型，操作是否成功

**描述**：切换指定窗口的最大化状态。

**示例代码**：

```e
JadeView.设置最大化状态(窗口ID)
```

## 销毁窗口

**函数签名**：`销毁窗口 > 逻辑型`

**参数**：
| 参数名 | 类型 | 可空 | 描述 |
|-------|------|------|------|
| 窗口ID | 整数型 | 否 | 窗口ID |

**返回值**：逻辑型，操作是否成功

**描述**：销毁指定窗口并释放资源。

**示例代码**：

```e
JadeView.销毁窗口(窗口ID)
```

## 最小化窗口

**函数签名**：`最小化窗口 > 逻辑型`

**参数**：
| 参数名 | 类型 | 可空 | 描述 |
|-------|------|------|------|
| 窗口ID | 整数型 | 否 | 窗口ID |

**返回值**：逻辑型，操作是否成功

**描述**：最小化指定窗口。

**示例代码**：

```e
JadeView.最小化窗口(窗口ID)
```

## 显示或隐藏窗口

**函数签名**：`显示或隐藏窗口 > 逻辑型`

**参数**：
| 参数名 | 类型 | 可空 | 描述 |
|-------|------|------|------|
| 窗口ID | 整数型 | 否 | 窗口ID |
| 是否显示 | 逻辑型 | 否 | 是否显示窗口 |

**返回值**：逻辑型，操作是否成功

**描述**：显示或隐藏指定窗口。

**示例代码**：

```e
JadeView.显示或隐藏窗口(窗口ID, 真) ' 显示窗口
JadeView.显示或隐藏窗口(窗口ID, 假) ' 隐藏窗口
```

## 设置全屏

**函数签名**：`设置全屏 > 逻辑型`

**参数**：
| 参数名 | 类型 | 可空 | 描述 |
|-------|------|------|------|
| 窗口ID | 整数型 | 否 | 窗口ID |
| 是否全屏 | 逻辑型 | 否 | 是否全屏显示 |

**返回值**：逻辑型，操作是否成功

**描述**：将指定窗口设置为全屏或窗口化。

**示例代码**：

```e
JadeView.设置全屏(窗口ID, 真) ' 全屏显示
JadeView.设置全屏(窗口ID, 假) ' 窗口化显示
```

## 焦点窗口

**函数签名**：`焦点窗口 > 逻辑型`

**参数**：
| 参数名 | 类型 | 可空 | 描述 |
|-------|------|------|------|
| 窗口ID | 整数型 | 否 | 窗口ID |

**返回值**：逻辑型，操作是否成功

**描述**：将焦点设置到指定窗口。

**示例代码**：

```e
JadeView.焦点窗口(窗口ID)
```

## 窗口置顶

**函数签名**：`窗口置顶 > 逻辑型`

**参数**：
| 参数名 | 类型 | 可空 | 描述 |
|-------|------|------|------|
| 窗口ID | 整数型 | 否 | 窗口ID |
| 是否置顶 | 逻辑型 | 否 | 是否始终置顶 |

**返回值**：逻辑型，操作是否成功

**描述**：设置指定窗口是否始终置于顶层。

**示例代码**：

```e
JadeView.窗口置顶(窗口ID, 真) ' 始终置顶
JadeView.窗口置顶(窗口ID, 假) ' 取消置顶
```

## 获取窗口数量

**函数签名**：`获取窗口数量 > 整数型`

**参数**：无

**返回值**：整数型，当前窗口数量

**描述**：获取 JadeView 创建的窗口数量。

**示例代码**：

```e
.局部变量 窗口数量, 整数型
窗口数量 ＝ JadeView.获取窗口数量()
调试输出 ("当前窗口数量：" ＋ 到文本 (窗口数量))
```

## 退出

**函数签名**：`退出 > 逻辑型`

**参数**：无

**返回值**：逻辑型，操作是否成功

**描述**：强制清理所有窗口，建议在程序退出前调用。

**示例代码**：

```e
JadeView.退出()
```

## 设置窗口大小

**函数签名**：`设置窗口大小 > 逻辑型`

**参数**：
| 参数名 | 类型 | 可空 | 描述 |
|-------|------|------|------|
| 窗口id | 整数型 | 否 | 窗口ID |
| 宽度 | 整数型 | 否 | 窗口宽度 |
| 高度 | 整数型 | 否 | 窗口高度 |

**返回值**：逻辑型，操作是否成功

**描述**：设置指定窗口的大小。

**示例代码**：

```e
JadeView.设置窗口大小(窗口ID, 1024, 768)
```

## 设置窗口位置

**函数签名**：`设置窗口位置 > 逻辑型`

**参数**：
| 参数名 | 类型 | 可空 | 描述 |
|-------|------|------|------|
| 窗口id | 整数型 | 否 | 窗口ID |
| x | 整数型 | 否 | X坐标 |
| y | 整数型 | 否 | Y坐标 |

**返回值**：逻辑型，操作是否成功

**描述**：设置指定窗口的位置。

**示例代码**：

```e
JadeView.设置窗口位置(窗口ID, 100, 100)
```

## 获取WebView版本

**函数签名**：`获取WebView版本 > 文本型`

**参数**：无

**返回值**：文本型，WebView版本号

**描述**：获取当前使用的 WebView 版本。

**示例代码**：

```e
.局部变量 版本, 文本型
版本 ＝ JadeView.获取WebView版本()
调试输出 ("WebView版本：" ＋ 版本)
```