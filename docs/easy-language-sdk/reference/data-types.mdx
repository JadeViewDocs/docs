# 数据类型

JadeView 易语言 SDK 中定义了一些数据类型，用于配置 WebView 窗口和 WebView 视窗的各种属性。以下是所有公开的数据类型：

## JadeView窗口设置

**定义**：`.数据类型 JadeView窗口设置, 公开, 对窗口的设置`

**描述**：用于配置 WebView 窗口的各种属性，包括窗口大小、位置、标题、主题等。

**成员列表**：

| 成员名 | 类型 | 描述 | 默认值 |
|-------|------|------|--------|
| 标题 | 文本型 | 窗口标题，默认自动跟随页面标题 | 自动跟随页面标题 |
| 宽度 | 整数型 | 窗口宽度 | 800 |
| 高度 | 整数型 | 窗口高度 | 600 |
| 可调整大小边框 | 逻辑型 | 是否可调整大小 | 真 |
| 去除标题栏 | 逻辑型 | 是否去除标题栏（0=显示标题栏，1=去除标题栏） | 假 |
| 透明背景 | 逻辑型 | 是否透明窗口 | 假 |
| 背景颜色 | JadeRgb结构 | 窗口背景色，与透明背景属性冲突 | - |
| 置顶窗口 | 逻辑型 | 是否始终置顶 | 假 |
| 禁止窗口居中 | 逻辑型 | 是否禁止窗口居中（0=居中，1=不居中） | 假 |
| 窗口主题 | 文本型 | 窗口主题，可使用 #主题_ 常量 | 自动 |
| 最大化 | 逻辑型 | 窗口是否最大化显示 | 假 |
| 最大化按钮 | 逻辑型 | 是否显示最大化按钮 | 真 |
| 最小化按钮 | 逻辑型 | 是否显示最小化按钮 | 真 |
| X坐标 | 整数型 | X坐标（-1表示居中） | -1 |
| Y坐标 | 整数型 | Y坐标（-1表示居中） | -1 |
| 最小宽度 | 整数型 | 最小宽度，0表示无限制 | 0 |
| 最小高度 | 整数型 | 最小高度，0表示无限制 | 0 |
| 最大宽度 | 整数型 | 最大宽度，0表示无限制 | 0 |
| 最大高度 | 整数型 | 最大高度，0表示无限制 | 0 |
| 全屏 | 逻辑型 | 是否全屏显示 | 假 |
| 焦点 | 逻辑型 | 是否获取焦点 | 真 |
| 隐藏窗口 | 逻辑型 | 是否隐藏窗口（0=显示窗口，1=隐藏窗口） | 假 |
| 使用页面图标 | 逻辑型 | 是否使用页面图标作为窗口图标 | - |

**示例代码**：

```e
.局部变量 窗口设置, JadeView窗口设置

窗口设置.标题 ＝ "我的 JadeView 应用"
窗口设置.宽度 ＝ 1024
窗口设置.高度 ＝ 768
窗口设置.窗口主题 ＝ #主题_自动
窗口设置.最大化按钮 ＝ 真
窗口设置.最小化按钮 ＝ 真
窗口设置.置顶窗口 ＝ 假
窗口设置.可调整大小边框 ＝ 真
```

## JadeView视窗设置

**定义**：`.数据类型 JadeView视窗设置, 公开, 对浏览器的设置`

**描述**：用于配置 WebView 视窗的各种属性，包括媒体自动播放、右键菜单等。

**成员列表**：

| 成员名 | 类型 | 描述 | 默认值 |
|-------|------|------|--------|
| 自动播放媒体 | 逻辑型 | 是否自动播放媒体 | 假 |
| 关闭后台限速 | 逻辑型 | 后台运行时是否限制计时器和渲染 | 假 |
| 禁用右键菜单 | 逻辑型 | 是否禁用右键菜单（无法全部关闭，处于编辑框时仍可用） | 假 |
| User_Agent | 文本型 | 自定义 User-Agent | - |
| preload_js | 文本型 | 在页面载入前执行的 JavaScript 代码 | - |

**示例代码**：

```e
.局部变量 视窗设置, JadeView视窗设置

视窗设置.自动播放媒体 ＝ 假
视窗设置.禁用右键菜单 ＝ 假
视窗设置.User_Agent ＝ "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"
视窗设置.preload_js ＝ "console.log('JadeView WebView 已加载');"
```

## JadeRgb结构

**定义**：`.数据类型 JadeRgb结构, 公开`

**描述**：用于表示 RGB 颜色值，包含红、绿、蓝和透明度四个分量。

**成员列表**：

| 成员名 | 类型 | 描述 | 取值范围 |
|-------|------|------|----------|
| R | 整数型 | 红色分量 | 0-255 |
| G | 整数型 | 绿色分量 | 0-255 |
| B | 整数型 | 蓝色分量 | 0-255 |
| A | 整数型 | 透明度分量 | 0-255 |

**示例代码**：

```e
.局部变量 窗口设置, JadeView窗口设置
.局部变量 背景颜色, JadeRgb结构

' 设置背景颜色为半透明的蓝色
背景颜色.R ＝ 0
背景颜色.G ＝ 0
背景颜色.B ＝ 255
背景颜色.A ＝ 128

窗口设置.背景颜色 ＝ 背景颜色
窗口设置.透明背景 ＝ 假 ' 注意：背景颜色与透明背景属性冲突
```

## 使用示例

以下是一个完整的示例，演示如何使用这些数据类型创建一个 WebView 窗口：

```e
.版本 2

.程序集 窗口程序集_启动窗口

.子程序 __启动窗口_创建完毕
    
    .局部变量 窗口设置, JadeView窗口设置
    .局部变量 视窗设置, JadeView视窗设置
    .局部变量 背景颜色, JadeRgb结构
    .局部变量 窗口ID, 整数型
    .局部变量 初始化成功, 逻辑型
    .局部变量 服务器目录, 文本型
    .局部变量 载入URL, 文本型
    
    ' 初始化背景颜色（浅灰色）
    背景颜色.R ＝ 240
    背景颜色.G ＝ 240
    背景颜色.B ＝ 240
    背景颜色.A ＝ 255
    
    ' 初始化 JadeView
    初始化成功 ＝ JadeView.初始化(假, "", "")
    
    .如果真 (初始化成功 ＝ 假)
        调试输出 ("JadeView 初始化失败！")
        返回 ()
    .如果真结束
    
    ' 初始化窗口设置
    窗口设置.标题 ＝ "JadeView 示例应用"
    窗口设置.宽度 ＝ 900
    窗口设置.高度 ＝ 600
    窗口设置.窗口主题 ＝ #主题_自动
    窗口设置.背景颜色 ＝ 背景颜色
    窗口设置.最大化按钮 ＝ 真
    窗口设置.最小化按钮 ＝ 真
    窗口设置.可调整大小边框 ＝ 真
    窗口设置.去除标题栏 ＝ 真
    窗口设置.透明背景 ＝ 真
    窗口设置.置顶窗口 ＝ 真
    
    ' 初始化视窗设置
    视窗设置.自动播放媒体 ＝ 假
    视窗设置.禁用右键菜单 ＝ 假
    视窗设置.preload_js ＝ "console.log('JadeView WebView 已初始化');"
    
    ' 创建本地服务（可选）
    服务器目录 ＝ 取运行目录 () ＋ "\web"
    载入URL ＝ JadeView.创建本地服务 (到文本 (服务器目录), "jadeview")
    
    调试输出 ("本地服务URL：" ＋ 载入URL)
    
    ' 创建 WebView 窗口
    窗口ID ＝ JadeView.创建窗口(载入URL, 取窗口句柄(), 窗口设置, 视窗设置)
    
    .如果真 (窗口ID ＞ 0)
        调试输出 ("WebView 窗口创建成功，窗口ID：" ＋ 到文本 (窗口ID))
        ' 设置窗口可见
        JadeView.窗口置顶 (窗口ID, 假)
    .如果真结束

.子程序 __启动窗口_将被销毁
    
    ' 清理所有窗口
    JadeView.清理所有窗口()
```

## 注意事项

1. **背景颜色与透明背景**：
   - `背景颜色` 和 `透明背景` 属性是冲突的，不能同时使用
   - 如果设置了 `透明背景` 为真，则 `背景颜色` 设置将被忽略
   - 如果设置了 `背景颜色`，则 `透明背景` 属性应设置为假

2. **窗口主题**：
   - 建议使用 SDK 提供的主题常量（`#主题_亮色`、`#主题_暗色`、`#主题_自动`）
   - 直接使用字符串值（"Light"、"Dark"、"System"）也可以，但不推荐

3. **窗口大小限制**：
   - `最小宽度`、`最小高度`、`最大宽度`、`最大高度` 用于限制窗口的可调整范围
   - 设置为 0 表示无限制

4. **坐标设置**：
   - `X坐标` 和 `Y坐标` 为 -1 表示窗口居中显示
   - 其他值表示窗口左上角的屏幕坐标

5. **隐藏窗口**：
   - `隐藏窗口` 属性设置为真时，窗口将不会显示
   - 可以通过 `set_window_visible` 函数动态显示或隐藏窗口

6. **User-Agent**：
   - 自定义 `User_Agent` 可以模拟不同的浏览器环境
   - 建议只在必要时自定义 `User_Agent`

7. **preload_js**：
   - `preload_js` 中可以注入需要在页面加载前执行的 JavaScript 代码
   - 可以用于修改页面行为或注入自定义功能

## 总结

JadeView 易语言 SDK 提供了三个主要的数据类型，用于配置 WebView 窗口和 WebView 视窗的各种属性。这些数据类型提供了灵活的配置选项，允许开发者根据自己的需求创建各种类型的 WebView 应用程序。

在使用这些数据类型时，建议：
- 了解每个成员的含义和默认值
- 遵循最佳实践，例如使用主题常量、避免冲突属性等
- 根据实际需求选择合适的配置选项
- 参考示例代码，了解如何正确使用这些数据类型

通过合理配置这些数据类型，您可以创建出功能丰富、外观精美的 WebView 应用程序。