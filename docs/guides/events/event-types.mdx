---
title: 事件类型
sidebar_position: 2
---

# 事件类型列表

## 核心事件

### app-ready

| 属性     | 说明                                                 |
| -------- | ---------------------------------------------------- |
| 触发条件 | 应用初始化完成                                       |
| 事件数据 | `success` 或错误信息                                 |
| 数据说明 | 字符串类型，成功时为 "success"，失败时为具体错误信息 |
| 说明     | 当 DLL 初始化完成并准备就绪时触发                    |

## 窗口事件

### window-created

| 属性     | 说明                  |
| -------- | --------------------- |
| 触发条件 | 窗口创建完成          |
| 事件数据 | `{}`                  |
| 数据说明 | JSON 对象，无额外数据 |
| 说明     | 当窗口成功创建时触发  |

### app-window-created

| 属性     | 说明                           |
| -------- | ------------------------------ |
| 触发条件 | 窗口创建完成                   |
| 事件数据 | `{}`                           |
| 数据说明 | JSON 对象，无额外数据          |
| 说明     | 窗口创建完成时触发的另一个名称 |

### window-closed

| 属性     | 说明                  |
| -------- | --------------------- |
| 触发条件 | 窗口关闭              |
| 事件数据 | `{}`                  |
| 数据说明 | JSON 对象，无额外数据 |
| 说明     | 当窗口关闭时触发      |

### window-all-closed

| 属性     | 说明                   |
| -------- | ---------------------- |
| 触发条件 | 所有窗口关闭           |
| 事件数据 | `{}`                   |
| 数据说明 | JSON 对象，无额外数据  |
| 说明     | 当所有窗口都关闭时触发 |

### window-closing

| 属性     | 说明                                     |
| -------- | ---------------------------------------- |
| 触发条件 | 窗口即将关闭                             |
| 事件数据 | `{}`                                     |
| 数据说明 | JSON 对象，无额外数据                    |
| 说明     | 当窗口即将关闭时触发，可用于阻止窗口关闭 |
| 阻止     | 可返回 1 来阻止窗口关闭                 |

### window-resized

| 属性     | 说明                                            |
| -------- | ----------------------------------------------- |
| 触发条件 | 窗口大小改变                                    |
| 事件数据 | `{"width": 宽度, "height": 高度}`               |
| 数据说明 | JSON 对象，包含窗口新的宽度和高度，均为整数类型 |
| 说明     | 当窗口大小改变时触发                            |

### window-state-changed

| 属性     | 说明                                  |
| -------- | ------------------------------------- |
| 触发条件 | 窗口状态改变                          |
| 事件数据 | `{"isMaximized": 布尔值}`             |
| 数据说明 | JSON 对象，包含窗口是否最大化的布尔值 |
| 说明     | 当窗口最大化或从最大化状态还原时触发  |

### window-moved

| 属性     | 说明                                              |
| -------- | ------------------------------------------------- |
| 触发条件 | 窗口位置改变                                      |
| 事件数据 | `{"x": x 坐标, "y": y 坐标}`                      |
| 数据说明 | JSON 对象，包含窗口新的 x 和 y 坐标，均为整数类型 |
| 说明     | 当窗口位置改变时触发                              |

### window-focused

| 属性     | 说明                  |
| -------- | --------------------- |
| 触发条件 | 窗口获得焦点          |
| 事件数据 | `{}`                  |
| 数据说明 | JSON 对象，无额外数据 |
| 说明     | 当窗口获得焦点时触发  |

### window-blurred

| 属性     | 说明                  |
| -------- | --------------------- |
| 触发条件 | 窗口失去焦点          |
| 事件数据 | `{}`                  |
| 数据说明 | JSON 对象，无额外数据 |
| 说明     | 当窗口失去焦点时触发  |

### window-destroyed

| 属性     | 说明                  |
| -------- | --------------------- |
| 触发条件 | 窗口销毁              |
| 事件数据 | `{}`                  |
| 数据说明 | JSON 对象，无额外数据 |
| 说明     | 当窗口被销毁时触发    |

### resized

| 属性     | 说明                                           |
| -------- | ---------------------------------------------- |
| 触发条件 | 窗口大小改变                                   |
| 事件数据 | `宽度,高度`                                    |
| 数据说明 | 字符串类型，格式为 "宽度,高度"，两个值均为整数 |
| 说明     | 窗口大小改变时触发的旧事件名称（用于兼容）     |

## WebView 事件

### webview-will-navigate

| 属性     | 说明                                        |
| -------- | ------------------------------------------- |
| 触发条件 | 即将导航                                    |
| 事件数据 | `{"url": "目标 URL", "window_id": 窗口 ID}` |
| 数据说明 | JSON 对象，包含即将导航到的 URL 和窗口 ID   |
| 说明     | 当 WebView 即将导航到新 URL 时触发          |

### webview-did-start-loading

| 属性     | 说明                                        |
| -------- | ------------------------------------------- |
| 触发条件 | 开始加载                                    |
| 事件数据 | `{"url": "加载 URL", "window_id": 窗口 ID}` |
| 数据说明 | JSON 对象，包含开始加载的 URL 和窗口 ID     |
| 说明     | 当 WebView 开始加载页面时触发               |

### webview-did-finish-load

| 属性     | 说明                                        |
| -------- | ------------------------------------------- |
| 触发条件 | 加载完成                                    |
| 事件数据 | `{"url": "加载 URL", "window_id": 窗口 ID}` |
| 数据说明 | JSON 对象，包含加载完成的 URL 和窗口 ID     |
| 说明     | 当 WebView 加载页面完成时触发               |

### webview-new-window

| 属性     | 说明                                                  |
| -------- | ----------------------------------------------------- |
| 触发条件 | 请求新窗口                                            |
| 事件数据 | `{"url": "新窗口 URL", "frame_name": "_blank"}`       |
| 数据说明 | JSON 对象，包含请求打开的 URL 和框架名称              |
| 说明     | 当 WebView 请求打开新窗口时触发，可用于阻止新窗口打开 |
| 阻止     | 可返回 1 来阻止新窗口打开                             |

### webview-page-title-updated

| 属性     | 说明                                        |
| -------- | ------------------------------------------- |
| 触发条件 | 页面标题更新                                |
| 事件数据 | `{"title": "新标题", "window_id": 窗口 ID}` |
| 数据说明 | JSON 对象，包含新的页面标题和窗口 ID        |
| 说明     | 当页面标题改变时触发                        |

### webview-page-icon-updated

| 属性     | 说明                            |
| -------- | ------------------------------- |
| 触发条件 | 页面图标更新                    |
| 事件数据 | JSON 对象                       |
| 数据说明 | JSON 对象，包含页面图标相关信息 |
| 说明     | 当页面图标改变时触发            |

### favicon-updated

| 属性     | 说明                             |
| -------- | -------------------------------- |
| 触发条件 | 页面图标更新                     |
| 事件数据 | `{"favicon": "图标 URL"}`        |
| 数据说明 | JSON 对象，包含页面图标的 URL    |
| 说明     | 当页面图标改变时触发的另一个名称 |

## 主题事件

### theme-changed

| 属性     | 说明                           |
| -------- | ------------------------------ |
| 触发条件 | 主题改变                       |
| 事件数据 | `{}`                           |
| 数据说明 | JSON 对象，无额外数据          |
| 说明     | 当系统主题或窗口主题改变时触发 |

## 其他事件

### update-window-icon

| 属性     | 说明                                 |
| -------- | ------------------------------------ |
| 触发条件 | 更新窗口图标                         |
| 事件数据 | `{"window_id": 窗口 ID}`             |
| 数据说明 | JSON 对象，包含需要更新图标的窗口 ID |
| 说明     | 当需要更新窗口图标时触发             |

## 事件处理示例

### 注册窗口事件

```c
// 事件回调函数
int event_callback(uint32_t window_id, const char* event_data) {
    printf("事件触发：window_id=%u, data=%s\n", window_id, event_data);
    return 1;
}

// 注册 window-created 事件处理器
uint32_t callback_id = jade_on("window-created", event_callback);
```

### 解析事件数据

```c
// 事件回调函数
int event_callback(uint32_t window_id, const char* event_data) {
    // 解析 JSON 数据
    // 这里可以使用 JSON 解析库来解析 event_data
    printf("事件数据：%s\n", event_data);
    return 1;
}

// 注册 window-resized 事件处理器
uint32_t callback_id = jade_on("window-resized", event_callback);
```

### 注销事件处理器

```c
// 注销事件处理器
jade_off("window-created", callback_id);
```
