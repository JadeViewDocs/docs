---
title: 样式与交互
sidebar_position: 3
---

# 样式与交互

## 自定义窗口拖动区域

JadeView 支持使用 CSS 属性 `app-region` 来自定义窗口的可拖动区域，允许开发者创建完全自定义的标题栏。

### app-region: drag

**功能说明**：将指定元素设置为窗口的可拖动区域，用户可以通过拖动该元素来移动窗口。

### 语法

```css
selector {
    app-region: drag;
}
```

### 功能描述

当元素设置了 `app-region: drag;` 样式后，该元素将成为窗口的可拖动区域。用户可以通过拖动这个元素来移动整个窗口，就像拖动标准窗口的标题栏一样。

### 适用场景

- 创建自定义标题栏
- 实现无边框窗口的拖动功能
- 允许用户通过界面任意区域拖动窗口

### app-region: no-drag

**功能说明**：在可拖动区域中排除指定元素，防止用户通过该元素拖动窗口。

### 语法

```css
selector {
    app-region: no-drag;
}
```

### 功能描述

当元素设置了 `app-region: no-drag;` 样式后，即使它位于设置了 `app-region: drag;` 的父元素中，该元素也不会成为可拖动区域。这允许在可拖动区域中放置可交互元素（如按钮、输入框等），而不会影响窗口拖动功能。

### 适用场景

- 在自定义标题栏中添加按钮
- 在可拖动区域中放置输入控件
- 防止可交互元素被误触导致窗口移动

### 使用示例

#### 示例 1：基本使用

```html
<!DOCTYPE html>
<html>
<head>
    <style>
        /* 设置整个 header 为可拖动区域 */
        .custom-titlebar {
            width: 100%;
            height: 40px;
            background-color: #333;
            color: white;
            display: flex;
            align-items: center;
            padding: 0 10px;
            app-region: drag;
        }
        
        /* 排除按钮，使其可以正常点击 */
        .titlebar-button {
            width: 30px;
            height: 30px;
            background-color: #555;
            border: none;
            color: white;
            margin-left: 5px;
            cursor: pointer;
            app-region: no-drag;
        }
        
        /* 标题文本 */
        .title {
            flex: 1;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="custom-titlebar">
        <div class="title">自定义标题栏</div>
        <button class="titlebar-button" id="minimize">-</button>
        <button class="titlebar-button" id="maximize">□</button>
        <button class="titlebar-button" id="close">×</button>
    </div>
    
    <div class="content">
        <h1>窗口内容区域</h1>
        <p>这是窗口的主要内容区域。</p>
    </div>
</body>
</html>
```

#### 示例 2：复杂布局

```html
<!DOCTYPE html>
<html>
<head>
    <style>
        /* 设置整个顶部区域为可拖动 */
        .top-container {
            background-color: #2c3e50;
            padding: 20px;
            color: white;
            app-region: drag;
        }
        
        /* 所有按钮排除拖动 */
        button {
            app-region: no-drag;
            background-color: #3498db;
            border: none;
            color: white;
            padding: 8px 16px;
            margin: 5px;
            cursor: pointer;
            border-radius: 4px;
        }
        
        /* 输入框排除拖动 */
        input {
            app-region: no-drag;
            padding: 8px;
            margin: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        /* 导航菜单 */
        .nav-menu {
            display: flex;
            margin: 10px 0;
        }
        
        .nav-item {
            padding: 10px 15px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .nav-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
    </style>
</head>
<body>
    <div class="top-container">
        <h1>应用标题</h1>
        
        <div class="nav-menu">
            <div class="nav-item">首页</div>
            <div class="nav-item">设置</div>
            <div class="nav-item">关于</div>
        </div>
        
        <div class="search-bar">
            <input type="text" placeholder="搜索...">
            <button>搜索</button>
        </div>
        
        <div class="action-buttons">
            <button>新建</button>
            <button>保存</button>
            <button>分享</button>
        </div>
    </div>
    
    <div class="main-content">
        <h2>主要内容</h2>
        <p>这是应用的主要功能区域。</p>
    </div>
</body>
</html>
```

### 注意事项

1. **嵌套规则**：
   - 子元素默认继承父元素的 `app-region` 属性
   - 可以在子元素上使用 `app-region: no-drag;` 来覆盖父元素的设置

2. **交互元素**：
   - 所有可交互元素（按钮、输入框、链接等）都应该设置 `app-region: no-drag;`
   - 否则这些元素可能无法正常响应点击事件

3. **性能考虑**：
   - 避免在大量元素上同时设置 `app-region: drag;`
   - 建议只在必要的区域设置拖动属性

4. **兼容性**：
   - 该属性仅在 JadeView 环境中有效
   - 在标准浏览器中会被忽略

### 最佳实践

1. **明确的拖动区域**：
   - 为拖动区域提供视觉反馈，让用户知道可以拖动
   - 避免将整个页面都设置为可拖动区域

2. **合理的元素布局**：
   - 将需要交互的元素（按钮、输入框）放在 `no-drag` 区域
   - 保持拖动区域的连续性，提高用户体验

3. **测试交互**：
   - 确保所有可交互元素都能正常响应
   - 测试窗口拖动功能是否符合预期

4. **响应式设计**：
   - 在不同屏幕尺寸下，保持拖动区域的可用性
   - 确保在移动设备上也能正常工作

### 常见问题

**问题**：设置了 `app-region: drag;` 的元素上的按钮无法点击？
**解决方案**：为按钮添加 `app-region: no-drag;` 样式。

**问题**：拖动区域不工作？
**解决方案**：确保元素是可见的、有尺寸的，并且没有被其他元素覆盖。

**问题**：窗口只能在特定区域拖动？
**解决方案**：检查是否正确设置了 `app-region: drag;` 的元素范围。

## 其他样式建议

- 使用 `user-select: none;` 防止拖动区域的文本被选中
- 添加 `cursor: default;` 或 `cursor: grab;` 来提示可拖动
- 使用 CSS 过渡效果增强交互体验
- 确保自定义标题栏的高度适中，方便用户拖动